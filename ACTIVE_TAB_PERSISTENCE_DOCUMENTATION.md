# ๐ ููุฒุฉ ุญูุธ ุงููุณู ุงููุดุท ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

## ๐ ููุฎุต ุงูููุฒุฉ

### ุงููุดููุฉ ุงูุฃุตููุฉ:
- ุนูุฏ ุงูุชููู ุจูู ุฃูุณุงู ุตูุญุงุช ููุญุฉ ุงูุฅุฏุงุฑุฉ (ูุซู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช)
- ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ (F5 ุฃู Refresh)
- ูุชู ุงูุนูุฏุฉ ูููุณู ุงูุฃูู (ุงูุงูุชุฑุงุถู) ุจุฏูุงู ูู ุงูุจูุงุก ูู ุงููุณู ุงูุฐู ูุงู ุงููุณุชุฎุฏู ุนููู

### ุงูุญู ุงููุทุจู:
ุฅูุดุงุก ูุธุงู ุฐูู ูุญูุธ ูุงุณุชุนุงุฏุฉ ุงููุณู ุงููุดุท ุจุงุณุชุฎุฏุงู localStorage ูุน ุฏุนู URL parameters ูุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช.

## ๐ฏ ุงููููุงุช ุงููุถุงูุฉ ูุงููุนุฏูุฉ

### 1. ููู Hook ุงูุฌุฏูุฏ: `src/hooks/useActiveTab.ts`

#### ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ:
- **ุญูุธ ุชููุงุฆู**: ุญูุธ ุงููุณู ุงููุดุท ูู localStorage ุนูุฏ ุงูุชุบููุฑ
- **ุงุณุชุนุงุฏุฉ ุฐููุฉ**: ุงุณุชุนุงุฏุฉ ุงููุณู ุงููุญููุธ ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุญููู
- **ุฏุนู URL**: ูุฑุงุกุฉ ุงููุณู ูู URL parameters
- **ุงูุชุญูู ูู ุงูุตุญุฉ**: ูุญุต ุตุญุฉ ุงูููู ุงููุญููุธุฉ
- **ูุฑููุฉ ูู ุงูุงุณุชุฎุฏุงู**: hooks ูุฎุตุตุฉ ููู ุตูุญุฉ

#### ุงูุฏูุงู ุงููุชุงุญุฉ:

```typescript
// Hook ุนุงู ูุงุจู ููุชุฎุตูุต
useActiveTab(options: UseActiveTabOptions): UseActiveTabReturn

// Hook ูุจุณุท
useSimpleActiveTab(defaultTab: string, storageKey: string, validTabs?: string[])

// Hook ุฎุงุต ูุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
useUsersManagementTab()

// Hook ุฎุงุต ูุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช
useSubscriptionManagementTab()

// ุฏูุงู ูุณุงุนุฏุฉ
clearAllSavedTabs(): void
getAllSavedTabs(): Record<string, string | null>
```

### 2. ุงูุชุนุฏููุงุช ุนูู ุงูุตูุญุงุช ุงูููุฌูุฏุฉ

#### ุฃ. ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู: `src/components/admin/users/UnifiedUsersManagement.tsx`

**ุงูุชุบููุฑุงุช:**
```typescript
// ูุจู ุงูุชุนุฏูู
const [activeTab, setActiveTab] = useState<TabType>('all');

// ุจุนุฏ ุงูุชุนุฏูู
import { useUsersManagementTab } from '../../../hooks/useActiveTab';
const { activeTab, setActiveTab } = useUsersManagementTab();
```

**ุงูุฃูุณุงู ุงููุฏุนููุฉ:**
- `all`: ุฌููุน ุงููุณุชุฎุฏููู
- `reports`: ุงูุจูุงุบุงุช
- `blocked`: ุงููุญุธูุฑูู
- `verification`: ุทูุจุงุช ุงูุชูุซูู

#### ุจ. ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช: `src/components/admin/SubscriptionManagement.tsx`

**ุงูุชุบููุฑุงุช:**
```typescript
// ูุจู ุงูุชุนุฏูู
const [activeTab, setActiveTab] = useState<'plans' | 'subscriptions' | 'payments' | 'pending-payments' | 'coupons' | 'payment-settings'>('plans');

// ุจุนุฏ ุงูุชุนุฏูู
import { useSubscriptionManagementTab } from '../../hooks/useActiveTab';
const { activeTab, setActiveTab } = useSubscriptionManagementTab();
```

**ุงูุฃูุณุงู ุงููุฏุนููุฉ:**
- `plans`: ุงูุจุงูุงุช
- `subscriptions`: ุงุดุชุฑุงูุงุช ุงููุณุชุฎุฏููู
- `payments`: ุงููุฏููุนุงุช
- `pending-payments`: ุงููุฏููุนุงุช ุงููุนููุฉ
- `coupons`: ููุจููุงุช ุงูุฎุตู
- `payment-settings`: ุฅุนุฏุงุฏุงุช ุงูุฏูุน

## ๐ง ููููุฉ ุนูู ุงููุธุงู

### 1. ุญูุธ ุงููุณู ุงููุดุท:
```typescript
// ุนูุฏ ุงูููุฑ ุนูู ูุณู ุฌุฏูุฏ
setActiveTab('reports'); // ูุชู ุญูุธู ุชููุงุฆูุงู ูู localStorage
```

### 2. ุงุณุชุนุงุฏุฉ ุงููุณู:
```typescript
// ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
const getInitialTab = (): string => {
  // 1. ูุญุต URL parameters ุฃููุงู
  const tabFromUrl = urlParams.get('tab');
  if (tabFromUrl && validTabs.includes(tabFromUrl)) {
    return tabFromUrl;
  }
  
  // 2. ูุญุต localStorage ุซุงููุงู
  const savedTab = localStorage.getItem(storageKey);
  if (savedTab && validTabs.includes(savedTab)) {
    return savedTab;
  }
  
  // 3. ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ
  return defaultTab;
};
```

### 3. ููุงุชูุญ localStorage ุงููุณุชุฎุฏูุฉ:
- `admin_users_active_tab`: ูููุณู ุงููุดุท ูู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- `admin_subscriptions_active_tab`: ูููุณู ุงููุดุท ูู ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช

### 4. ุฏุนู URL Parameters:
```
/admin/users?tab=reports          // ููุชูู ูุจุงุดุฑุฉ ููุณู ุงูุจูุงุบุงุช
/admin/subscriptions?tab=payments // ููุชูู ูุจุงุดุฑุฉ ููุณู ุงููุฏููุนุงุช
```

## ๐งช ููู ุงูุงุฎุชุจุงุฑ

ุชู ุฅูุดุงุก ููู ุงุฎุชุจุงุฑ ุดุงูู: `test-active-tab-persistence.html`

### ูููุฒุงุช ููู ุงูุงุฎุชุจุงุฑ:
- **ูุญุงูู ุชูุงุนูู**: ูุญุงูุงุฉ ุตูุญุงุช ููุญุฉ ุงูุฅุฏุงุฑุฉ
- **ุงุฎุชุจุงุฑ ุงูุญูุธ**: ุงุฎุชุจุงุฑ ุญูุธ ูุงุณุชุนุงุฏุฉ ุงูุฃูุณุงู
- **ูุญุต localStorage**: ุนุฑุถ ุงูุจูุงูุงุช ุงููุญููุธุฉ
- **ุงุฎุชุจุงุฑ ุดุงูู**: ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุชููุงุฆูุงู
- **ุชุนูููุงุช ูุงุถุญุฉ**: ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ ุงููุนูู

### ููููุฉ ุงุณุชุฎุฏุงู ููู ุงูุงุฎุชุจุงุฑ:
1. ุงูุชุญ ุงูููู ูู ุงููุชุตูุญ
2. ุงุณุชุฎุฏู ุงููุญุงููุงุช ููุชููู ุจูู ุงูุฃูุณุงู
3. ุงุถุบุท "ูุญุงูุงุฉ ุฅุนุงุฏุฉ ุงูุชุญููู" ููุงุฎุชุจุงุฑ
4. ุฑุงูุจ ุงููุชุงุฆุฌ ูุงูุญุงูุงุช
5. ุงุณุชุฎุฏู "ุงุฎุชุจุงุฑ ุดุงูู" ูุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช

## ๐ ุฎุทูุงุช ุงูุชุญูู ูู ูุฌุงุญ ุงูููุฒุฉ

### ุงุฎุชุจุงุฑ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู:
1. ุงุฐูุจ ุฅูู `/admin/users`
2. ุงููุฑ ุนูู ูุณู "ุงูุจูุงุบุงุช" ุฃู "ุงููุญุธูุฑูู"
3. ุงุถุบุท F5 ูุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
4. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ุงูุจูุงุก ูู ููุณ ุงููุณู

### ุงุฎุชุจุงุฑ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช:
1. ุงุฐูุจ ุฅูู `/admin/subscriptions`
2. ุงููุฑ ุนูู ูุณู "ุงููุฏููุนุงุช" ุฃู "ููุจููุงุช ุงูุฎุตู"
3. ุงุถุบุท F5 ูุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
4. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ุงูุจูุงุก ูู ููุณ ุงููุณู

### ุงุฎุชุจุงุฑ URL Parameters:
1. ุงุฐูุจ ุฅูู `/admin/users?tab=reports`
2. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ูุชุญ ูุณู ุงูุจูุงุบุงุช ูุจุงุดุฑุฉ
3. ุงุฐูุจ ุฅูู `/admin/subscriptions?tab=payments`
4. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**: ูุชุญ ูุณู ุงููุฏููุนุงุช ูุจุงุดุฑุฉ

## ๐ก๏ธ ุงูุญูุงูุฉ ูุงูุฃูุงู

### 1. ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช:
- ูุญุต ุงูููู ุงููุญููุธุฉ ุถุฏ ูุงุฆูุฉ ุงูุฃูุณุงู ุงููุณููุญุฉ
- ุชุฌุงูู ุงูููู ุบูุฑ ุงูุตุงูุญุฉ ูุงูุนูุฏุฉ ูููููุฉ ุงูุงูุชุฑุงุถูุฉ
- ุญูุงูุฉ ูู ุงูุจูุงูุงุช ุงููุงุณุฏุฉ ูู localStorage

### 2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:
```typescript
try {
  const saved = localStorage.getItem(storageKey);
  // ูุนุงูุฌุฉ ุงูุจูุงูุงุช...
} catch (error) {
  console.warn('Error reading saved tab:', error);
  return defaultTab; // ุงูุนูุฏุฉ ูููููุฉ ุงูุงูุชุฑุงุถูุฉ
}
```

### 3. ุงูุชูุงูู ูุน ุงููุชุตูุญุงุช:
- ุฏุนู ุฌููุน ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
- ูุนุงูุฌุฉ ุญุงูุงุช ุนุฏู ุฏุนู localStorage
- ุนูู ุงููุธุงู ุญุชู ูู ูุดู localStorage

## ๐ ุงูููุงุฆุฏ ุงููุญููุฉ

### 1. ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:
- โ ุนุฏู ููุฏุงู ูููุน ุงููุณุชุฎุฏู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุญููู
- โ ุชูููุฑ ุงูููุช ูู ุงูุชููู
- โ ุชุฌุฑุจุฉ ุฃูุซุฑ ุณูุงุณุฉ ูููุทููุฉ

### 2. ุฒูุงุฏุฉ ุงูููุงุกุฉ:
- โ ุชูููู ุงูููุฑุงุช ุงููุทููุจุฉ
- โ ุชุณุฑูุน ุงููุตูู ูููุนูููุงุช
- โ ุชุญุณูู ุณูุฑ ุงูุนูู ูููุดุฑููู

### 3. ุงููุฑููุฉ ูุงููุงุจููุฉ ููุชูุณุน:
- โ ุณูููุฉ ุฅุถุงูุฉ ุตูุญุงุช ุฌุฏูุฏุฉ
- โ ูุธุงู ูุงุจู ููุชุฎุตูุต
- โ ููุฏ ูุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### ุชุญุณููุงุช ููุชุฑุญุฉ:
1. **ุญูุธ ุญุงูุฉ ุงูููุงุชุฑ**: ุญูุธ ููุงุชุฑ ุงูุจุญุซ ูุงูุชุตููุฉ
2. **ุญูุธ ุฑูู ุงูุตูุญุฉ**: ุญูุธ ูููุน ุงูุชุตูุญ ูู ุงูููุงุฆู ุงูุทูููุฉ
3. **ูุฒุงููุฉ ุจูู ุงูุฃุฌูุฒุฉ**: ุญูุธ ุงูุชูุถููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ุฅุนุฏุงุฏุงุช ูุชูุฏูุฉ**: ุงูุณูุงุญ ูููุณุชุฎุฏู ุจุชุฎุตูุต ุงูุณููู

### ุฎุทุฉ ุงูุตูุงูุฉ:
- **ูุฑุงุฌุนุฉ ุดูุฑูุฉ** ูุฃุฏุงุก ุงููุธุงู
- **ุงุฎุชุจุงุฑ ุฏูุฑู** ููุชูุงูู ูุน ุงูุชุญุฏูุซุงุช
- **ูุฑุงูุจุฉ** ุงุณุชุฎุฏุงู localStorage
- **ุชุญุณูู** ุงูุฃุฏุงุก ุญุณุจ ุงูุญุงุฌุฉ

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:
1. ุงุณุชุฎุฏู ููู ุงูุงุฎุชุจุงุฑ ููุชุดุฎูุต
2. ุชุญูู ูู console ููุฃุฎุทุงุก
3. ุงูุณุญ localStorage ูุฃุนุฏ ุงููุญุงููุฉ
4. ุฑุงุฌุน ูุฐุง ุงูุชูุซูู ููุญููู

**ุชุงุฑูุฎ ุงูุฅุถุงูุฉ**: 29 ุฃุบุณุทุณ 2025  
**ุงูุฅุตุฏุงุฑ**: 1.0  
**ุงูุญุงูุฉ**: ููุชูู ููุฎุชุจุฑ โ
