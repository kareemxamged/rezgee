# ๐ก๏ธ ูุธุงู CAPTCHA ุงููุฎุตุต - ุฑุฒูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู CAPTCHA ูุฎุตุต ุจุณูุท ูุญูุงูุฉ ููุตุฉ ุฑุฒูู ูู ุงูุฑูุจูุชุงุช ูุงููุฌูุงุช ุงูุขููุฉ. ุงููุธุงู ูุนุชูุฏ ุนูู ุงููุณุงุฆู ุงูุฑูุงุถูุฉ ููุง ูุญุชุงุฌ ูุฃู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ.

## โ ุงูุญุงูุฉ ุงูุญุงููุฉ

### ๐ง **ุงูุชุญุฏูุซ ุงูุฃุฎูุฑ:**
- **ุชู ุงุณุชุจุฏุงู Google reCAPTCHA** ุจูุธุงู CAPTCHA ูุฎุตุต
- **ุงูุณุจุจ**: ุชุฌูุจ ุงูุชุนููุฏุงุช ูุงูุงุนุชูุงุฏ ุนูู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ
- **ุงูุญู**: ูุธุงู ุฑูุงุถู ุจุณูุท ููุนุงู

### ๐ฏ **ุงูุตูุญุงุช ุงููุฏุนููุฉ:**
- โ **ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู** (`/login`)
- โ **ุตูุญุฉ ุฅูุดุงุก ุงูุญุณุงุจ** (`/register`)
- โ **ุตูุญุฉ ูุณูุช ูููุฉ ุงููุฑูุฑ** (`/forgot-password`)
- โ **ุตูุญุฉ ุงูุงุชุตุงู** (`/contact`)
- โ **ุตูุญุฉ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ** (`/security`) - ุชุบููุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุฑูู ุงููุงุชู ููููุฉ ุงููุฑูุฑ

### ๐ง **ุงููููุฒุงุช:**
- ๐ **ุญูุงูุฉ ุจุณูุทุฉ ููุนุงูุฉ** ูู ุงูุฑูุจูุชุงุช ุงูุฃุณุงุณูุฉ
- ๐งฎ **ูุณุงุฆู ุฑูุงุถูุฉ ูุชููุนุฉ** (ุฌูุนุ ุทุฑุญุ ุถุฑุจ)
- ๐ง **ูุธุงู ุซูุฉ ุฐูู** - ูุชุฐูุฑ ุงููุณุชุฎุฏููู ุงูููุซูููู
- ๐ **ุชุฎุทู ุชููุงุฆู ููู CAPTCHA** ูููุณุชุฎุฏููู ุงูููุซูููู
- ๐ **ูุธุงู ููุงุท ุงูุซูุฉ** ูุญุณุจ ูุตุฏุงููุฉ ุงููุณุชุฎุฏู
- ๐ **ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช** (ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ)
- ๐ฑ **ุชุตููู ูุชุฌุงูุจ** ูุนูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ
- โก **ุฃุฏุงุก ุณุฑูุน** ุจุฏูู ุงุนุชูุงุฏ ุนูู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ
- ๐จ **ูุงุฌูุฉ ูุณุชุฎุฏู ุฃูููุฉ** ูุน ุฑุณุงุฆู ูุงุถุญุฉ
- ๐ **ุฅุนุงุฏุฉ ุชุญุฏูุซ ููุฑูุฉ** ูููุณุงุฆู ุนูุฏ ุงููุดู
- โฐ **ุงูุชูุงุก ุตูุงุญูุฉ ุชููุงุฆู** ููุชุญุฏูุงุช (5 ุฏูุงุฆู)
- ๐พ **ุฐุงูุฑุฉ ูุญููุฉ** ูุญูุธ ูุนูููุงุช ุงูุซูุฉ

## ๐ง ูุธุงู ุงูุซูุฉ ุงูุฐูู

### ๐ **ููู ูุนูู ูุธุงู ุงูุซูุฉ:**
1. **ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ**: ูุญุชุงุฌ ููุชุญูู ูู CAPTCHA ูู ูู ูุฑุฉ
2. **ุจูุงุก ุงูุซูุฉ**: ุจุนุฏ 3 ูุญุงููุงุช ูุงุฌุญุฉุ ูุจุฏุฃ ุจูุงุก ุงูุซูุฉ
3. **ุงููุณุชุฎุฏู ุงูููุซูู**: ุนูุฏ ุงููุตูู ูู 80% ููุงุท ุซูุฉุ ูุชู ุชุฎุทู CAPTCHA ุชููุงุฆูุงู
4. **ุงูุชูุงุก ุงูุซูุฉ**: ุชูุชูู ุงูุซูุฉ ุจุนุฏ 24 ุณุงุนุฉ ูู ุนุฏู ุงููุดุงุท

### โ๏ธ **ุฅุนุฏุงุฏุงุช ูุธุงู ุงูุซูุฉ:**
- **ูุฏุฉ ุงูุซูุฉ**: 24 ุณุงุนุฉ (ูุงุจูุฉ ููุชุฎุตูุต)
- **ุงูุญุฏ ุงูุฃุฏูู ูููุญุงููุงุช ุงููุงุฌุญุฉ**: 3 ูุญุงููุงุช
- **ุงูุญุฏ ุงูุฃูุตู ูููุญุงููุงุช ุงููุงุดูุฉ**: ูุญุงููุชุงู
- **ููุงุท ุงูุซูุฉ ุงููุทููุจุฉ**: 80%
- **ุชุฎุทู CAPTCHA**: ููุนู ูููุณุชุฎุฏููู ุงูููุซูููู

### ๐ข **ุญุณุงุจ ููุงุท ุงูุซูุฉ:**
```
ููุงุท ุงูุซูุฉ = (ุงููุญุงููุงุช ุงููุงุฌุญุฉ รท ุฅุฌูุงูู ุงููุญุงููุงุช) ร ููุงูุฃุฉ ุงูุชูุฑุงุฑ ร ุนููุจุฉ ุงููุดู ร ุนุงูู ุงูููุช
```

- **ููุงูุฃุฉ ุงูุชูุฑุงุฑ**: ููุงูุฃุฉ ูููุณุชุฎุฏููู ุฐูู ุงููุญุงููุงุช ุงููุงุฌุญุฉ ุงููุซูุฑุฉ
- **ุนููุจุฉ ุงููุดู**: ุชูููู ุงูููุงุท ุนูุฏ ุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ ูููุดู
- **ุนุงูู ุงูููุช**: ุงููุณุชุฎุฏููู ุงูุฌุฏุฏ ูุญุตููู ุนูู ููุงุท ุฃูู

## ๐๏ธ ููููุงุช ุงููุธุงู

### ๐ **ุงููููุงุช ุงูุฃุณุงุณูุฉ:**

#### 1. **ุฎุฏูุฉ CAPTCHA** (`src/lib/captchaService.ts`)
```typescript
export class CaptchaService {
  // ุชุญููู ูุชูููุฐ Google reCAPTCHA v3
  // ุงูุชุญูู ูู ุงูุชููู
  // ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช ูุงูุฅุญุตุงุฆูุงุช
}

export type CaptchaAction = 
  | 'login' 
  | 'register' 
  | 'forgot_password' 
  | 'contact_form' 
  | 'password_reset'
  | 'email_change'
  | 'profile_update';
```

#### 2. **ูููู CAPTCHA** (`src/components/CaptchaComponent.tsx`)
```typescript
interface CaptchaComponentProps {
  action: CaptchaAction;
  onVerify: (result: CaptchaVerificationResult) => void;
  onError?: (error: string) => void;
  disabled?: boolean;
  size?: 'small' | 'normal' | 'large';
  theme?: 'light' | 'dark' | 'auto';
  showScore?: boolean;
  autoExecute?: boolean;
}
```

### ๐ง **ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ:**

#### ูุชุบูุฑุงุช ุงูุจูุฆุฉ (`.env.local`):
```env
# Google reCAPTCHA Configuration
VITE_RECAPTCHA_SITE_KEY=6LfYourSiteKeyHere
VITE_RECAPTCHA_SECRET_KEY=6LfYourSecretKeyHere
VITE_RECAPTCHA_MIN_SCORE=0.5
VITE_RECAPTCHA_ENABLED=true
```

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. **ูู ุตูุญุฉ React:**
```tsx
import CaptchaComponent from './CaptchaComponent';
import CaptchaService, { CaptchaVerificationResult } from '../lib/captchaService';

const [captchaVerified, setCaptchaVerified] = useState(false);

const handleCaptchaVerify = (result: CaptchaVerificationResult) => {
  setCaptchaVerified(result.success);
  if (!result.success) {
    setErrorMessage(result.message || 'ูุดู ุงูุชุญูู ูู Captcha');
  }
};

// ูู JSX:
{CaptchaService.isEnabled() && (
  <CaptchaComponent
    action="login"
    onVerify={handleCaptchaVerify}
    onError={handleCaptchaError}
    disabled={isSubmitting}
    size="normal"
    theme="auto"
  />
)}

// ูู ุฏุงูุฉ ุงูุฅุฑุณุงู:
if (CaptchaService.isEnabled() && !captchaVerified) {
  setErrorMessage('ูุฌุจ ุงูุชุญูู ูู Captcha ูุจู ุงููุชุงุจุนุฉ');
  return;
}
```

### 2. **ุงูุชุญูู ูู ุงูุชููู:**
```typescript
const token = await CaptchaService.executeRecaptcha('login');
const result = await CaptchaService.verifyToken(token, 'login', userInfo);

if (result.success) {
  // ูุชุงุจุนุฉ ุงูุนูููุฉ
} else {
  // ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ
}
```

## ๐จ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### ๐ **ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช:**
- ุชุฑุฌูุงุช ูุงููุฉ ููุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ุชุฎุทูุท RTL/LTR ุชููุงุฆู
- ุฑุณุงุฆู ุฎุทุฃ ูุชุฑุฌูุฉ

### ๐ฏ **ุฃููุงุน ุงูุนูููุงุช ุงููุฏุนููุฉ:**
- `login` - ุชุณุฌูู ุงูุฏุฎูู
- `register` - ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
- `forgot_password` - ูุณูุช ูููุฉ ุงููุฑูุฑ
- `contact_form` - ูููุฐุฌ ุงูุงุชุตุงู
- `password_reset` - ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ
- `email_change` - ุชุบููุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- `profile_update` - ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู

### ๐ **ูุธุงู ุงูููุงุท:**
- ููุงุท ูู 0.0 ุฅูู 1.0
- ุงูุญุฏ ุงูุฃุฏูู ุงููุทููุจ: 0.5
- ุชุชุจุน ุงูุฅุญุตุงุฆูุงุช ูุงููุญุงููุงุช

### ๐ก๏ธ **ุงูุญูุงูุฉ ุงููุชูุฏูุฉ:**
- ููุน ุงููุฌูุงุช ุงูุขููุฉ
- ุชุชุจุน ุงููุญุงููุงุช ุงููุดุจููุฉ
- ุญุฏูุฏ ุฒูููุฉ ูููุญุงููุงุช
- ุชุณุฌูู ููุตู ููุฃูุดุทุฉ

## ๐งช ุงูุงุฎุชุจุงุฑ

### **ููู ุงูุงุฎุชุจุงุฑ ุงูุดุงูู:**
```bash
# ุงูุชุญ ูู ุงููุชุตูุญ
test-captcha-system.html
```

### **ุงูุงุฎุชุจุงุฑุงุช ุงููุชุงุญุฉ:**
- โ ูุญุต ุญุงูุฉ ุงููุธุงู
- โ ุงุฎุชุจุงุฑ ุฌููุน ุงูุตูุญุงุช
- โ ุงุฎุชุจุงุฑ ูููู CAPTCHA
- โ ุชุตุฏูุฑ ุงููุชุงุฆุฌ
- โ ุณุฌู ุงูุฃุญุฏุงุซ ุงูููุตู

### **ุงุฎุชุจุงุฑ ุณุฑูุน ูู ุงููููุณูู:**
```javascript
// ูุญุต ุญุงูุฉ CAPTCHA
console.log('CAPTCHA enabled:', CaptchaService.isEnabled());

// ุงุฎุชุจุงุฑ ุชูููุฐ CAPTCHA
CaptchaService.executeRecaptcha('login')
  .then(token => console.log('Token:', token))
  .catch(error => console.error('Error:', error));
```

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### **ุงููุดุงูู ุงูุดุงุฆุนุฉ:**

#### 1. **CAPTCHA ูุง ูุธูุฑ:**
```bash
# ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
echo $VITE_RECAPTCHA_SITE_KEY
echo $VITE_RECAPTCHA_ENABLED

# ุชุญูู ูู ุงููููุณูู ููุฃุฎุทุงุก
```

#### 2. **ุฎุทุฃ ูู ุงูุชุญูู:**
```javascript
// ุชุญูู ูู ุตุญุฉ ุงูููุงุชูุญ
CaptchaService.getConfig()

// ุชุญูู ูู ุงูุดุจูุฉ
// Developer Tools > Network > ููุชุฑุฉ "recaptcha"
```

#### 3. **ููุงุท ููุฎูุถุฉ:**
```javascript
// ุชุญูู ูู ุงูููุงุท ุงููุทููุจุฉ
console.log('Min Score:', CaptchaService.getConfig().minScore);

// ุชุญูู ูู ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู
CaptchaService.getUserCaptchaStats(userId, 24);
```

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงููุฑุงูุจุฉ

### **ุฅุญุตุงุฆูุงุช ูุชุงุญุฉ:**
- ุฅุฌูุงูู ุงููุญุงููุงุช
- ุงููุญุงููุงุช ุงููุงุฌุญุฉ/ุงููุงุดูุฉ
- ูุชูุณุท ุงูููุงุท
- ูุนุฏู ุงููุฌุงุญ
- ุงููุณุชุฎุฏููู ุงููุดุจูููู

### **ุฏูุงู ุงููุฑุงูุจุฉ:**
```typescript
// ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู
await CaptchaService.getUserCaptchaStats(userId, hours);

// ูุญุต ุงููุณุชุฎุฏู ุงููุดุจูู
await CaptchaService.isSuspiciousUser(userId);

// ุชุณุฌูู ูุญุงููุฉ
await CaptchaService.logCaptchaAttempt(attempt);
```

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

### **ุงููุฎุทุท ูู:**
- [ ] ุฏุนู CAPTCHA ุฅุถุงููุฉ (hCaptcha, Turnstile)
- [ ] ุชุญูููุงุช ูุชูุฏูุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- [ ] ุชูุงูู ูุน ูุธุงู ุงูุชูุจููุงุช
- [ ] ูุงุฌูุฉ ุฅุฏุงุฑูุฉ ูุฅุฏุงุฑุฉ CAPTCHA
- [ ] ุชูุงุฑูุฑ ููุตูุฉ ูููุดุฑููู

### **ุงูุชุญุณููุงุช ุงูููููุฉ:**
- ุชุญุณูู ุฃุฏุงุก ุงูุชุญููู
- ุฏุนู CAPTCHA ุบูุฑ ูุฑุฆูุฉ
- ุชุฎุตูุต ุงูุชุตููู ุฃูุซุฑ
- ุฏุนู ุงููุฒูุฏ ูู ุงููุบุงุช

## ๐ ุงูุฏุนู

### **ูู ุญุงูุฉ ุงููุดุงูู:**
1. ุชุญูู ูู ููู `test-captcha-system.html`
2. ุฑุงุฌุน ุงููููุณูู ููุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุตุญุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
4. ุงุฎุชุจุฑ ุงูุงุชุตุงู ุจู Google reCAPTCHA

### **ุงููููุงุช ุงููุฑุฌุนูุฉ:**
- `src/lib/captchaService.ts` - ุงูุฎุฏูุฉ ุงูุฃุณุงุณูุฉ
- `src/components/CaptchaComponent.tsx` - ุงููููู ุงูุฑุฆูุณู
- `src/locales/ar.json` - ุงูุชุฑุฌูุงุช ุงูุนุฑุจูุฉ
- `src/locales/en.json` - ุงูุชุฑุฌูุงุช ุงูุฅูุฌููุฒูุฉ

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุชุทููุฑ ูุธุงู CAPTCHA ูุชูุงูู ูุขูู ูุญูุงูุฉ ููุตุฉ ุฑุฒูู. ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููุชูุงูู ูุน ุฌููุน ุงูุตูุญุงุช ุงููููุฉ. ุชู ุญู ุฌููุน ุงููุดุงูู ุงูุชูููุฉ ูุฅุถุงูุฉ ูุธุงู ุงุฎุชุจุงุฑ ุดุงูู.

**ุงูุญุงูุฉ:** โ **ุฌุงูุฒ ููุฅูุชุงุฌ**
