# ุชูุฑูุฑ ุฅุตูุงุญ ุฅุนุงุฏุฉ ุชุนููู ุนุฏุงุฏ ุงูุฃุฎุทุงุก

## ๐ฏ ุงููุดููุฉ ุงูููุญุฏุฏุฉ

ูุงู ุงููุธุงู ุงููุชุฏุฑุฌ ูุนูู ุฌุฒุฆูุงู - ุงูููุชุงุญ ุงูุญูููู ููุดู ููุชู ุงูุชุจุฏูู ููููุชุงุญ ุงูุชุฌุฑูุจู ุจูุฌุงุญุ ููู ุงููุดููุฉ ุฃู `keyErrors` ูุง ูุชู ุฅุนุงุฏุฉ ุชุนูููู ุจุดูู ุตุญูุญ ุนูุฏ ุงูุชุจุฏูู ููููุชุงุญ ุงูุชุฌุฑูุจูุ ููุง ูููุน ุงูุชุจุฏูู ูููููู ุงูุชูููุฏู ุนูุฏ ูุดู ุงูููุชุงุญ ุงูุชุฌุฑูุจู.

### ุงููุดููุฉ ุงูููุญุฏุฏุฉ:
- **โ ุงูููุชุงุญ ุงูุญูููู ููุดู**: ููุง ูู ูุชููุน
- **โ ุงูุชุจุฏูู ููููุชุงุญ ุงูุชุฌุฑูุจู**: ูุนูู ุจูุฌุงุญ
- **โ ุงูููุชุงุญ ุงูุชุฌุฑูุจู ููุดู**: ูุง ูุชู ุงูุชุจุฏูู ูููููู ุงูุชูููุฏู
- **โ ุนุฏุงุฏ ุงูุฃุฎุทุงุก**: ูุง ูุชู ุฅุนุงุฏุฉ ุชุนูููู ุจุดูู ุตุญูุญ

## โ ุงูุญู ุงูููุทุจู

### 1. ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุชุนููู `keyErrors` ูู ุฌููุน ุงูุฃูุงูู
ุชู ุฅุถุงูุฉ `setKeyErrors(0)` ูู ุฌููุน ุงูุฃูุงูู ุงูุชู ูุชู ูููุง ุงูุชุจุฏูู:

#### ูู error-callback:
```typescript
// ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ุงูููุชุงุญ ุงูุญููููุ ุฌุฑุจ ุงูููุชุงุญ ุงูุจุฏูู
if (currentSiteKey === PRIMARY_SITE_KEY && newErrorCount === 1) {
  console.log('๐ ูุญุงููุฉ ุงุณุชุฎุฏุงู ุงูููุชุงุญ ุงูุชุฌุฑูุจู ุงูุจุฏูู...');
  
  // ุชุฃุฎูุฑ ุตุบูุฑ ูุจู ุงูุชุจุฏูู
  setTimeout(() => {
    setCurrentSiteKey(FALLBACK_SITE_KEY);
    setKeyErrors(0);
    setIsInitialized(false); // ุฅุนุงุฏุฉ ุชููุฆุฉ ูุถูุงู ุงูุชุจุฏูู
  }, 100);
  return;
}

// ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ุงูููุชุงุญ ุงูุจุฏูู ุฃูุถุงูุ ุงุณุชุฎุฏู ุงููููู ุงูุชูููุฏู
if (currentSiteKey === FALLBACK_SITE_KEY && newErrorCount >= 1) {
  console.log('๐ ุงุณุชุฎุฏุงู ุงููููู ุงูุชูููุฏู ูุงุญุชูุงุทู...');
  
  // ุงูุชุจุฏูู ูููููู ุงูุชูููุฏู
  setUseFallback(true);
  setKeyErrors(0); // ุฅุนุงุฏุฉ ุชุนููู ุนุฏุงุฏ ุงูุฃุฎุทุงุก
  return;
}
```

#### ูู catch:
```typescript
// ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ุงูููุชุงุญ ุงูุญููููุ ุฌุฑุจ ุงูููุชุงุญ ุงูุจุฏูู
if (currentSiteKey === PRIMARY_SITE_KEY && newErrorCount === 1) {
  console.log('๐ ูุญุงููุฉ ุงุณุชุฎุฏุงู ุงูููุชุงุญ ุงูุชุฌุฑูุจู ุงูุจุฏูู...');
  
  // ุชุฃุฎูุฑ ุตุบูุฑ ูุจู ุงูุชุจุฏูู
  setTimeout(() => {
    setCurrentSiteKey(FALLBACK_SITE_KEY);
    setKeyErrors(0);
    setIsInitialized(false); // ุฅุนุงุฏุฉ ุชููุฆุฉ ูุถูุงู ุงูุชุจุฏูู
  }, 100);
  return;
}

// ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ุงูููุชุงุญ ุงูุจุฏูู ุฃูุถุงูุ ุงุณุชุฎุฏู ุงููููู ุงูุชูููุฏู
if (currentSiteKey === FALLBACK_SITE_KEY && newErrorCount >= 1) {
  console.log('๐ ุงุณุชุฎุฏุงู ุงููููู ุงูุชูููุฏู ูุงุญุชูุงุทู...');
  
  // ุงูุชุจุฏูู ูููููู ุงูุชูููุฏู
  setRecaptchaError('ุฎุทุฃ ูู ุชููุฆุฉ reCAPTCHA');
  setUseFallback(true);
  setKeyErrors(0); // ุฅุนุงุฏุฉ ุชุนููู ุนุฏุงุฏ ุงูุฃุฎุทุงุก
  return;
}
```

#### ูู script.onerror:
```typescript
// ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ุงูููุชุงุญ ุงูุญููููุ ุฌุฑุจ ุงูููุชุงุญ ุงูุจุฏูู
if (currentSiteKey === PRIMARY_SITE_KEY && newErrorCount === 1) {
  console.log('๐ ูุญุงููุฉ ุงุณุชุฎุฏุงู ุงูููุชุงุญ ุงูุชุฌุฑูุจู ุงูุจุฏูู...');
  setCurrentSiteKey(FALLBACK_SITE_KEY);
  setKeyErrors(0);
  setRecaptchaError(null);
  setIsInitialized(false); // ุฅุนุงุฏุฉ ุชููุฆุฉ ูุถูุงู ุงูุชุจุฏูู
  return;
}

// ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ุงูููุชุงุญ ุงูุจุฏูู ุฃูุถุงูุ ุงุณุชุฎุฏู ุงููููู ุงูุชูููุฏู
if (currentSiteKey === FALLBACK_SITE_KEY && newErrorCount >= 1) {
  console.log('๐ ุงุณุชุฎุฏุงู ุงููููู ุงูุชูููุฏู ูุงุญุชูุงุทู...');
  
  // ุงูุชุจุฏูู ูููููู ุงูุชูููุฏู
  setRecaptchaError('ูุดู ูู ุชุญููู reCAPTCHA');
  setUseFallback(true);
  setKeyErrors(0); // ุฅุนุงุฏุฉ ุชุนููู ุนุฏุงุฏ ุงูุฃุฎุทุงุก
  return;
}
```

#### ูู timeout:
```typescript
// ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ุงูููุชุงุญ ุงูุญููููุ ุฌุฑุจ ุงูููุชุงุญ ุงูุจุฏูู
if (currentSiteKey === PRIMARY_SITE_KEY && newErrorCount === 1) {
  console.log('๐ ูุญุงููุฉ ุงุณุชุฎุฏุงู ุงูููุชุงุญ ุงูุชุฌุฑูุจู ุงูุจุฏูู...');
  setCurrentSiteKey(FALLBACK_SITE_KEY);
  setKeyErrors(0);
  setRecaptchaError(null);
  setIsInitialized(false); // ุฅุนุงุฏุฉ ุชููุฆุฉ ูุถูุงู ุงูุชุจุฏูู
  return;
}

// ุฅุฐุง ูุงู ููุงู ุฎุทุฃ ูู ุงูููุชุงุญ ุงูุจุฏูู ุฃูุถุงูุ ุงุณุชุฎุฏู ุงููููู ุงูุชูููุฏู
if (currentSiteKey === FALLBACK_SITE_KEY && newErrorCount >= 1) {
  console.log('๐ ุงุณุชุฎุฏุงู ุงููููู ุงูุชูููุฏู ูุงุญุชูุงุทู...');
  
  // ุงูุชุจุฏูู ูููููู ุงูุชูููุฏู
  setRecaptchaError('ุงูุชูุช ูููุฉ ุชุญููู reCAPTCHA');
  setUseFallback(true);
  setKeyErrors(0); // ุฅุนุงุฏุฉ ุชุนููู ุนุฏุงุฏ ุงูุฃุฎุทุงุก
  return;
}
```

### 2. ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุชููุฆุฉ `isInitialized`
ุชู ุฅุถุงูุฉ `setIsInitialized(false)` ูู ุฌููุน ุงูุฃูุงูู ุงูุชู ูุชู ูููุง ุงูุชุจุฏูู ููููุชุงุญ ุงูุชุฌุฑูุจู ูุถูุงู ุฅุนุงุฏุฉ ุงูุชููุฆุฉ.

## ๐จ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### ุงูุณููู ุงููุชููุน ุงูุขู:
1. **ุงูููุชุงุญ ุงูุญูููู ููุดู**: ูุชู ุฅุนุงุฏุฉ ุชุนููู `keyErrors` ูุงูุชุจุฏูู ููููุชุงุญ ุงูุชุฌุฑูุจู
2. **ุงูููุชุงุญ ุงูุชุฌุฑูุจู ููุดู**: ูุชู ุฅุนุงุฏุฉ ุชุนููู `keyErrors` ูุงูุชุจุฏูู ูููููู ุงูุชูููุฏู
3. **ูุง ุชูุฌุฏ ุฑุณุงุฆู ูุชูุฑุฑุฉ**: ูู ุชุจุฏูู ูุญุฏุซ ูุฑุฉ ูุงุญุฏุฉ ููุท
4. **ุงููููู ุงูุชูููุฏู ูุธูุฑ**: ุนูุฏ ูุดู ููุง ุงูููุชุงุญูู

### ุงููุฒุงูุง ุงูููุญููุฉ:
- **โ ุฅุนุงุฏุฉ ุชุนููู ุตุญูุญ**: `keyErrors` ูุชู ุฅุนุงุฏุฉ ุชุนูููู ูู ุฌููุน ุงูุฃูุงูู
- **โ ุฅุนุงุฏุฉ ุชููุฆุฉ**: `isInitialized` ูุชู ุฅุนุงุฏุฉ ุชุนูููู ุนูุฏ ุงูุชุจุฏูู
- **โ ุชุทุจูู ุดุงูู**: ููุณ ุงูููุทู ูู ุฌููุน ุงูุฃูุงูู
- **โ ุชููู ุงูุฑุณุงุฆู ุงููุชูุฑุฑุฉ**: ุงูุชุจุฏูู ูุชู ูุฑุฉ ูุงุญุฏุฉ ููุท

## ๐ ุงููููุงุช ุงูููุญุฏุซุฉ

### `src/components/RecaptchaComponent.tsx`:
- **ุฅุถุงูุฉ**: `setKeyErrors(0)` ูู ุฌููุน ุงูุฃูุงูู ุงูุชู ูุชู ูููุง ุงูุชุจุฏูู
- **ุฅุถุงูุฉ**: `setIsInitialized(false)` ุนูุฏ ุงูุชุจุฏูู ููููุชุงุญ ุงูุชุฌุฑูุจู
- **ุชุญุณูู**: ุฅุนุงุฏุฉ ุชุนููู ุดุงูู ูุฌููุน ุงูุญุงูุงุช

## ๐งช ุงูุงุฎุชุจุงุฑ

### ููุชุญูู ูู ุงูุฅุตูุงุญ:
1. **ุงูุชุญ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู**
2. **ุฑุงูุจ ูุญุฏุฉ ุงูุชุญูู ููุฑุณุงุฆู**
3. **ุชุญูู ูู ุงูุชุจุฏูู ุงููุชุฏุฑุฌ**:
   - ุงูููุชุงุญ ุงูุญูููู ููุดู โ ุงูุชุจุฏูู ููููุชุงุญ ุงูุชุฌุฑูุจู
   - ุงูููุชุงุญ ุงูุชุฌุฑูุจู ููุดู โ ุงูุชุจุฏูู ูููููู ุงูุชูููุฏู
4. **ุชุญูู ูู ุนุฏู ุชูุฑุงุฑ ุงูุฑุณุงุฆู**: ูุฌุจ ุฃู ูุญุฏุซ ุงูุชุจุฏูู ูุฑุฉ ูุงุญุฏุฉ ููุท

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- **ุฑุณุงุฆู ูุงุถุญุฉ**: "ูุญุงููุฉ ุงุณุชุฎุฏุงู ุงูููุชุงุญ ุงูุชุฌุฑูุจู ุงูุจุฏูู" ุซู "ุงุณุชุฎุฏุงู ุงููููู ุงูุชูููุฏู ูุงุญุชูุงุทู"
- **ูุง ุชูุฌุฏ ุฑุณุงุฆู ูุชูุฑุฑุฉ**: ูู ุชุจุฏูู ูุญุฏุซ ูุฑุฉ ูุงุญุฏุฉ ููุท
- **ุงููููู ุงูุชูููุฏู ูุธูุฑ**: ุนูุฏ ูุดู ููุง ุงูููุชุงุญูู
- **ูุง ุชูุฌุฏ ุฃุฎุทุงุก**: ุงูุชุจุฏูู ูุชู ุจุดูู ุณูุณ

## ๐ ุงูุชุญุณููุงุช ุงููุญููุฉ

### 1. ุงุณุชูุฑุงุฑ ุงููุธุงู:
- **ุฅุนุงุฏุฉ ุชุนููู ุตุญูุญ ูุนุฏุงุฏ ุงูุฃุฎุทุงุก**
- **ุชุจุฏูู ุณูุณ ุจูู ุงูุฃูุธูุฉ**
- **ุชูุธูู ุดุงูู ูู ูู ุชุจุฏูู**

### 2. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:
- **ุงูุชูุงู ุณูุณ ูููููู ุงูุชูููุฏู**
- **ูุง ุชูุฌุฏ ุฑุณุงุฆู ุฎุทุฃ ูุฑุจูุฉ**
- **ุนูู ูุณุชูุฑ ูููุธุงู**

### 3. ุงูููุฏ:
- **ููุทู ูุชุณู**: ููุณ ุงูููุทู ูู ุฌููุน ุงูุฃูุงูู
- **ุฅุนุงุฏุฉ ุชุนููู ุดุงูู**: ูุฌููุน ุงูุญุงูุงุช ูุงููุชุบูุฑุงุช
- **ููุฏ ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู**

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 09-08-2025  
**ุงููุดููุฉ**: ุนุฏุงุฏ ุงูุฃุฎุทุงุก ูุง ูุชู ุฅุนุงุฏุฉ ุชุนูููู ุจุดูู ุตุญูุญ  
**ุงูุญู**: ุฅุถุงูุฉ ุฅุนุงุฏุฉ ุชุนููู `keyErrors` ูู ุฌููุน ุงูุฃูุงูู  
**ุงูุญุงูุฉ**: ููุชูู ูููุฎุชุจุฑ โ

