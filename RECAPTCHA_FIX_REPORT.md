# ุชูุฑูุฑ ุฅุตูุงุญ ูุดููุฉ reCAPTCHA

## ๐ ุงููุดููุฉ ุงููููุชุดูุฉ

### ุงูุฎุทุฃ:
```
โ ุฎุทุฃ ูู ุชููุฆุฉ reCAPTCHA: Error: reCAPTCHA has already been rendered in this element
```

### ุงูุณุจุจ:
- ุชู ุชููุฆุฉ reCAPTCHA ุฃูุซุฑ ูู ูุฑุฉ ูู ููุณ ุงูุนูุตุฑ
- ูุญุฏุซ ุนูุฏ ุฅุนุงุฏุฉ ุชุญููู ุงููููู ุฃู ุงุณุชุฏุนุงุก `useEffect` ุนุฏุฉ ูุฑุงุช
- ุนุฏู ุชูุธูู ุงูุนูุตุฑ ูุจู ุงูุชููุฆุฉ ุงูุฌุฏูุฏุฉ

## โ ุงูุญู ุงูููุทุจู

### 1. ุฅุถุงูุฉ ูุญุต ุงูุชููุฆุฉ
```typescript
const [isInitialized, setIsInitialized] = useState(false);
```

### 2. ุชุญุณูู ุดุฑุท ุงูุชููุฆุฉ
```typescript
// ูุจู ุงูุฅุตูุงุญ
if (recaptchaLoaded && !disabled && !useFallback && recaptchaRef.current && widgetIdRef.current === null)

// ุจุนุฏ ุงูุฅุตูุงุญ
if (recaptchaLoaded && !disabled && !useFallback && recaptchaRef.current && !isInitialized)
```

### 3. ูุณุญ ูุญุชูู ุงูุนูุตุฑ
```typescript
// ูุณุญ ูุญุชูู ุงูุนูุตุฑ ุฃููุงู ูุชุฌูุจ ุงูุชููุฆุฉ ุงููุชุนุฏุฏุฉ
if (recaptchaRef.current) {
  recaptchaRef.current.innerHTML = '';
}
```

### 4. ุชุญุฏูุซ ุญุงูุฉ ุงูุชููุฆุฉ
```typescript
widgetIdRef.current = widgetId;
setIsInitialized(true);
console.log('โ ุชู ุชููุฆุฉ reCAPTCHA ุจูุฌุงุญุ Widget ID:', widgetId);
```

### 5. ุชุญุณูู ุงูุชูุธูู
```typescript
// ุชูุธูู reCAPTCHA ุนูุฏ ุฅูุบุงุก ุชุญููู ุงููููู
useEffect(() => {
  return () => {
    if (widgetIdRef.current !== null && window.grecaptcha) {
      try {
        window.grecaptcha.reset(widgetIdRef.current);
        widgetIdRef.current = null;
        setIsInitialized(false); // ุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงูุชููุฆุฉ
      } catch (error) {
        console.error('โ ุฎุทุฃ ูู ุชูุธูู reCAPTCHA:', error);
      }
    }
  };
}, []);
```

### 6. ุชุญุณูู ุฏุงูุฉ ุฅุนุงุฏุฉ ุงูุชุนููู
```typescript
const resetRecaptcha = () => {
  if (widgetIdRef.current !== null && window.grecaptcha) {
    try {
      window.grecaptcha.reset(widgetIdRef.current);
      setRecaptchaVerified(false);
      setRecaptchaToken(null);
      console.log('โ ุชู ุฅุนุงุฏุฉ ุชุนููู reCAPTCHA');
    } catch (error) {
      console.error('โ ุฎุทุฃ ูู ุฅุนุงุฏุฉ ุชุนููู reCAPTCHA:', error);
      // ูู ุญุงูุฉ ุงูุฎุทุฃุ ุงุณุชุฎุฏู ุงููููู ุงูุชูููุฏู
      setUseFallback(true);
    }
  }
};
```

## ๐ง ุงูุชุญุณููุงุช ุงูููุถุงูุฉ

### 1. ููุน ุงูุชููุฆุฉ ุงููุชุนุฏุฏุฉ
- ูุญุต ุญุงูุฉ `isInitialized` ูุจู ุงูุชููุฆุฉ
- ูุณุญ ูุญุชูู ุงูุนูุตุฑ ูุจู ุงูุชููุฆุฉ ุงูุฌุฏูุฏุฉ
- ุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงูุชููุฆุฉ ุนูุฏ ุงูุชูุธูู

### 2. ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก
- ุฑุณุงุฆู ุฎุทุฃ ุฃูุซุฑ ูุถูุญุงู
- ุงุณุชุฎุฏุงู ุงููููู ุงูุชูููุฏู ุนูุฏ ูุดู reCAPTCHA
- ุชุณุฌูู ููุตู ููุนูููุงุช

### 3. ุชูุธูู ูุญุณู
- ุชูุธูู ุดุงูู ุนูุฏ ุฅูุบุงุก ุชุญููู ุงููููู
- ุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุงููุชุบูุฑุงุช
- ููุน ุชุณุฑูุจ ุงูุฐุงูุฑุฉ

## ๐ ุงููุชุงุฆุฌ

### โ ูุจู ุงูุฅุตูุงุญ:
- ุฎุทุฃ "reCAPTCHA has already been rendered"
- ุชููุฆุฉ ูุชุนุฏุฏุฉ ูููุณ ุงูุนูุตุฑ
- ูุดุงูู ูู ุงูุชูุธูู

### โ ุจุนุฏ ุงูุฅุตูุงุญ:
- ูุง ุชูุฌุฏ ุฃุฎุทุงุก ุชููุฆุฉ ูุชุนุฏุฏุฉ
- ุชููุฆุฉ ูุงุญุฏุฉ ููุท ููู ุนูุตุฑ
- ุชูุธูู ุตุญูุญ ุนูุฏ ุฅูุบุงุก ุงูุชุญููู
- ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

## ๐งช ุงูุงุฎุชุจุงุฑ

### ููุชุญูู ูู ุงูุฅุตูุงุญ:
1. ุงูุชุญ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
2. ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู ูุญุฏุฉ ุงูุชุญูู
3. ุงุฎุชุจุฑ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
4. ุงุฎุชุจุฑ ุงูุชููู ุจูู ุงูุตูุญุงุช
5. ุชุญูู ูู ุนูู reCAPTCHA ุจุดูู ุตุญูุญ

### ุงูุฑุณุงุฆู ุงููุชููุนุฉ ูู ูุญุฏุฉ ุงูุชุญูู:
```
โ ุชู ุชุญููู Google reCAPTCHA ุจูุฌุงุญ
โ ุชู ุชููุฆุฉ reCAPTCHA ุจูุฌุงุญุ Widget ID: [ุฑูู]
โ ุชู ุงูุชุญูู ูู reCAPTCHA: [token]
```

## ๐ ุงูุชูุตูุงุช

### 1. ูุฑุงูุจุฉ ูุณุชูุฑุฉ
- ุฑุงูุจ ุณุฌูุงุช ูุญุฏุฉ ุงูุชุญูู ููุฃุฎุทุงุก
- ุชุญูู ูู ุนูู reCAPTCHA ูู ุฌููุน ุงูุตูุญุงุช
- ุฑุงูุจ ุงุณุชุฎุฏุงู ุงููููู ุงูุชูููุฏู ูุงุญุชูุงุทู

### 2. ุงุฎุชุจุงุฑ ุฏูุฑู
- ุงุฎุชุจุฑ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุงุช
- ุงุฎุชุจุฑ ุงูุชููู ุจูู ุงูุตูุญุงุช ุงููุฎุชููุฉ
- ุงุฎุชุจุฑ ูู ุจูุฆุงุช ูุฎุชููุฉ (ุชุทููุฑุ ุฅูุชุงุฌ)

### 3. ุชุญุณููุงุช ูุณุชูุจููุฉ
- ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูุชุญูู ูู ุงูุฃุฎุทุงุก
- ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูููุณุชุฎุฏููู
- ุฅุถุงูุฉ ูุฑุงูุจุฉ ุงูุฃุฏุงุก

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ**: 09-08-2025  
**ุงููุดููุฉ**: reCAPTCHA has already been rendered  
**ุงูุญุงูุฉ**: ูุญูููุฉ โ  
**ุงูููู ุงูููุญุฏุซ**: `src/components/RecaptchaComponent.tsx`


