# ๐ง ุฅุตูุงุญ ูุธุงู ุฅุฑุณุงู ุฅูููู ุงูุชุญูู ูู ุตูุญุฉ ุงูุชุณุฌูู

## ๐ ุชุงุฑูุฎ ุงูุฅุตูุงุญ: 16 ุณุจุชูุจุฑ 2025

## ๐ฏ ุงููุดููุฉ ุงููุญุฏุฏุฉ

ูุงูุช ููุงู ูุดููุฉ ูู ุตูุญุฉ "ุฅูุดุงุก ุงูุญุณุงุจ" ุญูุซ:
- ุจุนุฏ ููุก ุฌููุน ุงูุญููู ูุงูุถุบุท ุนูู ุฒุฑ "ุชุฃููุฏ ุงูุญุณุงุจ"
- ูุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ ุงูุฅุฑุณุงู
- ููู ุงููุณุชุฎุฏู ูุง ูุชููู ุฃู ุฅูููู ูู ุตูุฏูู ุงูุจุฑูุฏ

## ๐ ุชุญููู ุงููุดููุฉ

### ุงูุณุจุจ ุงูุฌุฐุฑู:
ูุงู ูุธุงู ุงูุชุณุฌูู ูุณุชุฎุฏู `ClientEmailService.sendPasswordSetupEmail()` ุงูุฐู:
1. **ูุญูุธ ุงูุฅูููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุท** (`email_queue` table)
2. **ูุง ูุฑุณู ุงูุฅูููู ูุนููุงู** ุนุจุฑ ุฎุงุฏู SMTP
3. ูุนุชูุฏ ุนูู ูุนุงูุฌ ุฎุงุฑุฌู ููุฑุงุกุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฅุฑุณุงู ุงูุฅููููุงุช

### ุงูุฃูุธูุฉ ุงูุชู ุชุนูู ุจุดูู ุตุญูุญ:
- **ูุธุงู ูููุฉ ุงููุฑูุฑ ุงููุคูุชุฉ** (ุตูุญุฉ ูุณูุช ูููุฉ ุงููุฑูุฑ)
- **ูุธุงู ุงูุชุญูู ุงูุซูุงุฆู** (2FA)

ูุฐู ุงูุฃูุธูุฉ ุชุณุชุฎุฏู:
```javascript
fetch('http://localhost:3001/send-email', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(emailData)
})
```

## โ ุงูุญู ุงููุทุจู

### 1. ุชุญุฏูุซ `ClientEmailService.sendPasswordSetupEmail()`

ุชู ุชุนุฏูู ุงูุฏุงูุฉ ูุชุณุชุฎุฏู ููุณ ุงูููุท ุงููุงุฌุญ:

```typescript
// ุฅุฑุณุงู ูุจุงุดุฑ ุนุจุฑ ุงูุฎุงุฏู ุงููุณุชูู (ููุณ ุทุฑููุฉ ูููุฉ ุงููุฑูุฑ ุงููุคูุชุฉ)
console.log('๐ ุฅุฑุณุงู ูุจุงุดุฑ ุนุจุฑ SMTP Server...');
const response = await fetch('http://localhost:3001/send-email', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    to: params.to,
    subject: subject,
    html: emailHtml,
    text: emailText,
    from: this.fromEmail,
    fromName: this.fromName
  })
});
```

### 2. ูุธุงู Fallback ูุญุณู

ุฅุฐุง ูุดู ุงูุฅุฑุณุงู ุงููุจุงุดุฑุ ูุชู:
1. **ุญูุธ ุงูุฅูููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** ููุณุฎุฉ ุงุญุชูุงุทูุฉ
2. **ุฅุธูุงุฑ ุฑุณุงูุฉ ูุฌุงุญ** ูููุณุชุฎุฏู
3. **ุชุณุฌูู ุงูุฃุฎุทุงุก** ูู ุงููููุณูู ูููุทูุฑูู

## ๐ง ุงููููุงุช ุงููุญุฏุซุฉ

### ุงูููู ุงูุฑุฆูุณู:
- **`src/lib/clientEmailService.ts`**: ุชุญุฏูุซ ุฏุงูุฉ `sendPasswordSetupEmail()`

### ุงูุชุบููุฑุงุช ุงููุญุฏุฏุฉ:
1. **ุฅุถุงูุฉ ุฅุฑุณุงู ูุจุงุดุฑ** ุนุจุฑ `fetch()` ุฅูู `http://localhost:3001/send-email`
2. **ุงุณุชุฎุฏุงู ุงููุงูุจ ุงูููุญุฏ** ูุน ุงุณุชุฎุฑุงุฌ `html`, `text`, `subject`
3. **ูุธุงู fallback ูุญุณู** ูุน ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ุชุญุณูู ุฑุณุงุฆู ุงููููุณูู** ููุชุชุจุน ูุงูุชุดุฎูุต

## ๐ ููููุฉ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

### 1. ุงูุชุฃูุฏ ูู ุชุดุบูู ุฎุงุฏู SMTP:
```bash
# ูุฌุจ ุฃู ูููู ุฎุงุฏู SMTP ูุนูู ุนูู ุงููููุฐ 3001
curl http://localhost:3001/health
```

### 2. ุงุฎุชุจุงุฑ ุงูุชุณุฌูู:
1. ุงูุชูู ุฅูู ุตูุญุฉ ุงูุชุณุฌูู
2. ุงููุฃ ุฌููุน ุงูุญููู ุงููุทููุจุฉ
3. ุงุถุบุท ุนูู "ุชุฃููุฏ ุงูุญุณุงุจ"
4. ุชุญูู ูู ูุตูู ุงูุฅูููู

### 3. ูุฑุงูุจุฉ ุงููููุณูู:
ุงุจุญุซ ุนู ูุฐู ุงูุฑุณุงุฆู:
```
๐ง ุฅุฑุณุงู ุฅูููู ุชุนููู ูููุฉ ุงููุฑูุฑ...
๐ ุฅุฑุณุงู ูุจุงุดุฑ ุนุจุฑ SMTP Server...
โ ุชู ุฅุฑุณุงู ุฅูููู ุชุนููู ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ
```

## ๐ ููุงุฑูุฉ ูุจู ูุจุนุฏ ุงูุฅุตูุงุญ

### โ ูุจู ุงูุฅุตูุงุญ:
```
RegisterPage.tsx โ ClientEmailService.sendPasswordSetupEmail() 
                โ supabase.from('email_queue').insert() 
                โ [ูุง ูุชู ุฅุฑุณุงู ุงูุฅูููู ูุนููุงู]
```

### โ ุจุนุฏ ุงูุฅุตูุงุญ:
```
RegisterPage.tsx โ ClientEmailService.sendPasswordSetupEmail() 
                โ fetch('http://localhost:3001/send-email') 
                โ [ุฅุฑุณุงู ููุฑู ุนุจุฑ SMTP]
                โ [fallback: ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช]
```

## ๐ ูููุฒุงุช ุงูุฃูุงู ุงููุญุงูุธ ุนูููุง

- **ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช** ูุจู ุงูุฅุฑุณุงู
- **ุชุดููุฑ ุงูุงุชุตุงูุงุช** ูุน ุฎุงุฏู SMTP
- **ุชุณุฌูู ุงูุนูููุงุช** ูููุฑุงุฌุนุฉ ุงูุฃูููุฉ
- **ูุธุงู fallback** ูุถูุงู ุนุฏู ููุฏุงู ุงูุทูุจุงุช

## ๐ ููุงุญุธุงุช ูููุทูุฑูู

### 1. ุฎุงุฏู SMTP ูุทููุจ:
- ูุฌุจ ุชุดุบูู ุฎุงุฏู SMTP ุนูู `localhost:3001`
- ุงูุฎุงุฏู ูุฌุจ ุฃู ูุฏุนู endpoint `/send-email`

### 2. ุฅุนุฏุงุฏุงุช ุงูุจุฑูุฏ:
- **From Email**: `manage@kareemamged.com`
- **From Name**: `ุฑุฒูู - ูููุน ุงูุฒูุงุฌ ุงูุฅุณูุงูู`

### 3. ุงูููุงูุจ ุงููุณุชุฎุฏูุฉ:
- **ุงููุงูุจ ุงูููุญุฏ**: `unifiedEmailTemplate.js`
- **ููุน ุงููุงูุจ**: `passwordSetup`

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงูุขู ุนูุฏ ุงูุชุณุฌูู:
1. โ **ูุชู ุฅุฑุณุงู ุงูุฅูููู ููุฑุงู** ุนุจุฑ SMTP
2. โ **ูุตู ุงูุฅูููู ูููุณุชุฎุฏู** ูู ุตูุฏูู ุงูุจุฑูุฏ
3. โ **ูุญุชูู ุนูู ุฑุงุจุท ุงูุชุญูู** ุงูุตุญูุญ
4. โ **ูุนูู ูุธุงู fallback** ูู ุญุงูุฉ ุงูุฃุฎุทุงุก

## ๐ ุงูุฏุนู ุงูููู

ููุงุณุชูุณุงุฑุงุช ุญูู ูุฐุง ุงูุฅุตูุงุญ:
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: contact@kareemamged.com
- **ุงูุชูุซูู**: ูููุงุช README ูู ุงููุดุฑูุน

---

**ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ - 16 ุณุจุชูุจุฑ 2025** โ
