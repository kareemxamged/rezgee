# إضافة قوالب البلاغات (Reports)

## 📋 ملخص العمل

تم إضافة قالبين جديدين لنظام إشعارات البلاغات:

### 1. قالب استلام البلاغ
- **الاسم:** `report_received`
- **الوصف:** إشعار يتم إرساله للمستخدم عند استلام بلاغ ضده
- **المحتوى:** تنبيه مع تفاصيل البلاغ ونصائح للالتزام بالقوانين

### 2. قالب تحديث حالة البلاغ
- **الاسم:** `report_status_update`
- **الوصف:** إشعار يتم إرساله للمبلغ عند تحديث حالة البلاغ (قبول/رفض)
- **المحتوى:** إشعار بالقرار المتخذ مع تفاصيل البلاغ

## 🗂️ الملفات المضافة

### `add_report_templates.sql`
- إدراج نوعي إشعار جديدين في جدول `email_notification_types`
- إدراج قالبين جديدين في جدول `email_templates`
- محتوى كامل باللغتين العربية والإنجليزية
- تصميم HTML متجاوب مع ألوان مختلفة حسب حالة البلاغ

## 📊 البيانات المضافة

### أنواع الإشعارات الجديدة:
1. **report_received**
   - الاسم العربي: إشعار استلام البلاغ
   - الاسم الإنجليزي: Report Received Notification

2. **report_status_update**
   - الاسم العربي: إشعار تحديث حالة البلاغ
   - الاسم الإنجليزي: Report Status Update Notification

### القوالب الجديدة:
1. **قالب استلام البلاغ**
   - موضوع عربي: "⚠️ تم استلام بلاغ ضدك - رزقي"
   - موضوع إنجليزي: "⚠️ Report Received Against You - Rezge"
   - محتوى تحذيري مع تفاصيل البلاغ ونصائح الالتزام

2. **قالب تحديث حالة البلاغ**
   - موضوع عربي: "تم تحديث حالة البلاغ - رزقي"
   - موضوع إنجليزي: "Report Status Updated - Rezge"
   - محتوى ديناميكي يتغير حسب حالة البلاغ (قبول/رفض)

## 🎨 المميزات التصميمية

### قالب استلام البلاغ:
- تصميم تحذيري بألوان برتقالية
- تفاصيل البلاغ في صندوق منفصل
- تنبيه مهم للالتزام بالقوانين
- زر التواصل مع الدعم

### قالب تحديث حالة البلاغ:
- تصميم ديناميكي يتغير حسب الحالة
- ألوان خضراء للقبول، حمراء للرفض
- تفاصيل القرار المتخذ
- رسالة شكر أو توضيح حسب الحالة

## 🔧 المتغيرات المستخدمة

### قالب استلام البلاغ:
- `{{userName}}` - اسم المستخدم
- `{{reportType}}` - نوع البلاغ
- `{{timestamp}}` - وقت استلام البلاغ
- `{{supportUrl}}` - رابط التواصل مع الدعم

### قالب تحديث حالة البلاغ:
- `{{userName}}` - اسم المستخدم
- `{{reportType}}` - نوع البلاغ
- `{{status}}` - الحالة الجديدة
- `{{timestamp}}` - وقت اتخاذ القرار
- `{{isAccepted}}` - متغير منطقي للقبول/الرفض
- `{{contactEmail}}` - بريد التواصل

## 📱 التصميم المتجاوب

- تصميم متجاوب يعمل على جميع الأجهزة
- ألوان متدرجة جذابة
- خطوط واضحة ومقروءة
- تخطيط منظم وسهل القراءة
- أيقونات تعبيرية واضحة

## 🚀 كيفية التنفيذ

```sql
-- تنفيذ SQL script
\i add_report_templates.sql
```

## ✅ النتائج المتوقعة

بعد التنفيذ:
- إضافة نوعي إشعار جديدين للبلاغات
- إضافة قالبين جديدين قابلين للاستخدام
- إمكانية التحكم في القوالب من لوحة الإدارة
- إرسال إشعارات مخصصة للمستخدمين حسب حالة البلاغ

## 🔍 المراجعة والاختبار

- تأكد من صحة البيانات المدرجة
- اختبر القوالب من لوحة الإدارة
- تحقق من عرض المحتوى باللغتين
- تأكد من عمل المتغيرات الديناميكية
- اختبر التصميم المتجاوب

## 🔗 التكامل مع النظام

### نقاط التكامل:
- `notificationEmailService.sendReportReceivedNotification()`
- `notificationEmailService.sendReportStatusNotification()`
- `reportService.createReport()`
- `reportService.updateReportStatus()`
- لوحة إدارة البلاغات

### أنواع البلاغات المدعومة:
- إساءة استخدام
- محتوى غير لائق
- معلومات خاطئة
- سلوك مشبوه
- انتهاك القوانين

---

**تاريخ الإنشاء:** ${new Date().toLocaleDateString('ar-EG')}  
**الحالة:** جاهز للتنفيذ  
**المطور:** مساعد الذكاء الاصطناعي







