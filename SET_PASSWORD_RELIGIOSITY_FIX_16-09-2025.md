# ๐ง ุฅุตูุงุญ ุฎุทุฃ ููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ุตูุญุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ

## ๐ ุชุงุฑูุฎ ุงูุฅุตูุงุญ: 16 ุณุจุชูุจุฑ 2025

## ๐ฏ ุงููุดููุฉ ุงููุญุฏุฏุฉ

ูุงู ููุงู ุฎุทุฃ ูู ุตูุญุฉ "set-password" ุนูุฏ ูุญุงููุฉ ุฅูุดุงุก ุงูููู ุงูุดุฎุตู ูููุณุชุฎุฏู ุงูุฌุฏูุฏ:

```
Profile creation error: {
  code: '23514', 
  message: 'new row for relation "users" violates check constraint "check_religiosity_level"'
}
```

## ๐ ุชุญููู ุงููุดููุฉ

### ุงูุณุจุจ ุงูุฌุฐุฑู:
ุชุถุงุฑุจ ูู ููู `religiosity_level` ุจูู:

**ูู RegisterPage.tsx:**
```typescript
religiosityLevel: z.enum(['not_religious', 'somewhat_religious', 'religious']).optional()
```

**ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (add_extended_profile_fields.sql):**
```sql
CHECK (religiosity_level IN ('not_religious', 'slightly_religious', 'religious', 'very_religious', 'prefer_not_say') OR religiosity_level IS NULL)
```

### ุงููุดููุฉ ุงููุญุฏุฏุฉ:
- ุงููููุฐุฌ ูุฑุณู `'somewhat_religious'`
- ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุชููุน `'slightly_religious'`
- ูุฐุง ูุณุจุจ ุงูุชูุงู ููุฏ ุงูุชุญูู

## โ ุงูุญู ุงููุทุจู

### 1. ุชุญุฏูุซ ููุน ุงูุจูุงูุงุช ูู RegisterFormData

```typescript
// ูุจู ุงูุฅุตูุงุญ
religiosityLevel?: 'not_religious' | 'somewhat_religious' | 'religious';

// ุจุนุฏ ุงูุฅุตูุงุญ  
religiosityLevel?: 'not_religious' | 'slightly_religious' | 'religious' | 'very_religious' | 'prefer_not_say';
```

### 2. ุชุญุฏูุซ ูุฎุทุท ุงูุชุญูู (Zod Schema)

```typescript
// ูุจู ุงูุฅุตูุงุญ
religiosityLevel: z.enum(['not_religious', 'somewhat_religious', 'religious']).optional()

// ุจุนุฏ ุงูุฅุตูุงุญ
religiosityLevel: z.enum(['not_religious', 'slightly_religious', 'religious', 'very_religious', 'prefer_not_say']).optional()
```

### 3. ุชุญุฏูุซ ุฎูุงุฑุงุช ุงููููุฐุฌ ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู

```jsx
<select {...register('religiosityLevel')}>
  <option value="">{t('auth.register.religiosityLevelPlaceholder')}</option>
  <option value="not_religious">{t('auth.register.religiosityLevelNotReligious')}</option>
  <option value="slightly_religious">ูุชุฏูู ููููุงู</option>
  <option value="religious">{t('auth.register.religiosityLevelReligious')}</option>
  <option value="very_religious">ูุชุฏูู ุฌุฏุงู</option>
  <option value="prefer_not_say">ุฃูุถู ุนุฏู ุงูุฅุฌุงุจุฉ</option>
</select>
```

## ๐ง ุงููููุงุช ุงููุญุฏุซุฉ

### ุงูููู ุงูุฑุฆูุณู:
- **`src/components/RegisterPage.tsx`**: ุชุญุฏูุซ ููุน ุงูุจูุงูุงุช ููุฎุทุท ุงูุชุญูู ูุฎูุงุฑุงุช ุงููููุฐุฌ

### ุงูุชุบููุฑุงุช ุงููุญุฏุฏุฉ:
1. **ุชุญุฏูุซ RegisterFormData interface** - ุฅุถุงูุฉ ุฌููุน ุงูููู ุงููุณููุญุฉ
2. **ุชุญุฏูุซ Zod validation schema** - ูุทุงุจูุฉ ูููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **ุชุญุฏูุซ ุฎูุงุฑุงุช select** - ุฅุถุงูุฉ ุงูุฎูุงุฑุงุช ุงูุฌุฏูุฏุฉ ูุน ุชุฑุฌูุงุช

## ๐ฏ ูููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุทุงุจูุฉ ุงูุขู

### religiosity_level:
- `'not_religious'` - ุบูุฑ ูุชุฏูู
- `'slightly_religious'` - ูุชุฏูู ููููุงู  
- `'religious'` - ูุชุฏูู
- `'very_religious'` - ูุชุฏูู ุฌุฏุงู
- `'prefer_not_say'` - ุฃูุถู ุนุฏู ุงูุฅุฌุงุจุฉ
- `NULL` - ูุง ููุฌุฏ ูููุฉ

### ูููุฏ ุฃุฎุฑู ูุชุทุงุจูุฉ:
- **prayer_commitment**: `'dont_pray'`, `'pray_all'`, `'pray_sometimes'`, `'prefer_not_say'`
- **smoking**: `'yes'`, `'no'`
- **beard**: `'yes'`, `'no'`
- **hijab**: `'no_hijab'`, `'hijab'`, `'niqab'`, `'prefer_not_say'`

## ๐ ููููุฉ ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญ

### 1. ุงุฎุชุจุงุฑ ุงูุชุณุฌูู ุงูุฌุฏูุฏ:
1. ุงูุชูู ุฅูู ุตูุญุฉ ุงูุชุณุฌูู
2. ุงููุฃ ุฌููุน ุงูุญููู ูุน ุงุฎุชูุงุฑ ูุณุชูู ุงูุชุฏูู
3. ุฃููู ุงูุชุณุฌูู ูุงุณุชูู ุฅูููู ุงูุชุญูู
4. ุงููุฑ ุนูู ุฑุงุจุท ุงูุชุญูู ูู ุงูุฅูููู

### 2. ุงุฎุชุจุงุฑ ุตูุญุฉ set-password:
1. ุงุฏุฎู ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ
2. ุงุถุบุท ุนูู "ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ"
3. ูุฌุจ ุฃู ูุชู ุฅูุดุงุก ุงูุญุณุงุจ ุจูุฌุงุญ

### 3. ูุฑุงูุจุฉ ุงููููุณูู:
ุงุจุญุซ ุนู ูุฐู ุงูุฑุณุงุฆู:
```
โ ุชู ุฅูุดุงุก ุงููุณุชุฎุฏู ูู auth.users ุจูุฌุงุญ
โ User profile created successfully
```

## ๐ ููุงุฑูุฉ ูุจู ูุจุนุฏ ุงูุฅุตูุงุญ

### โ ูุจู ุงูุฅุตูุงุญ:
```
RegisterPage โ 'somewhat_religious' โ Database Constraint Error
โ new row violates check constraint "check_religiosity_level"
```

### โ ุจุนุฏ ุงูุฅุตูุงุญ:
```
RegisterPage โ 'slightly_religious' โ Database Accepts Value
โ User profile created successfully
```

## ๐ ุงูุชุญุณููุงุช ุงูุฅุถุงููุฉ

### 1. ุฎูุงุฑุงุช ุฃูุซุฑ ุดููููุฉ:
- ุฅุถุงูุฉ `'very_religious'` ูููุณุชุฎุฏููู ุดุฏูุฏู ุงูุชุฏูู
- ุฅุถุงูุฉ `'prefer_not_say'` ููุฎุตูุตูุฉ

### 2. ูุทุงุจูุฉ ูุงููุฉ ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- ุฌููุน ุงูููู ุงูุขู ูุชุทุงุจูุฉ ูุน ูููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุง ุชูุฌุฏ ุฅููุงููุฉ ูุงูุชูุงู ุงููููุฏ

### 3. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ:
- ุฎูุงุฑุงุช ุฃูุถุญ ูุฃูุซุฑ ุชูุตููุงู
- ุชุฑุฌูุงุช ุนุฑุจูุฉ ููุงุณุจุฉ

## ๐ ููุงุญุธุงุช ูููุทูุฑูู

### 1. ูุญุต ูููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
ุนูุฏ ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉุ ุชุฃูุฏ ูู ูุทุงุจูุฉ:
- ุฃููุงุน ุงูุจูุงูุงุช ูู TypeScript
- ูุฎุทุทุงุช ุงูุชุญูู (Zod schemas)  
- ูููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (CHECK constraints)

### 2. ูููุงุช ูููุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- **ุงูููู**: `supabase/migrations/add_extended_profile_fields.sql`
- **ุงููููุฏ**: ุชุญูู ูู ุฌููุน ูููุฏ CHECK ูุจู ุงูุชุญุฏูุซ

### 3. ุงุฎุชุจุงุฑ ุดุงูู:
- ุงุฎุชุจุฑ ุฌููุน ุงูููู ุงููุณููุญุฉ
- ุงุฎุชุจุฑ ุงูููู ุงููุงุฑุบุฉ (NULL)
- ุงุฎุชุจุฑ ุงูููู ุบูุฑ ุงููุณููุญุฉ

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงูุขู ุนูุฏ ุฅููุงู ุงูุชุณุฌูู:
1. โ **ูุชู ูุจูู ุฌููุน ููู ูุณุชูู ุงูุชุฏูู** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. โ **ูุชู ุฅูุดุงุก ุงูููู ุงูุดุฎุตู ุจูุฌุงุญ** ุฏูู ุฃุฎุทุงุก
3. โ **ูููู ูููุณุชุฎุฏู ุชุนููู ูููุฉ ุงููุฑูุฑ** ูุฅููุงู ุงูุชุณุฌูู
4. โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ** ูู ุงูุชุณุฌูู ุญุชู ุชูุนูู ุงูุญุณุงุจ

## ๐ ุงูุฏุนู ุงูููู

ููุงุณุชูุณุงุฑุงุช ุญูู ูุฐุง ุงูุฅุตูุงุญ:
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: contact@kareemamged.com
- **ุงูุชูุซูู**: ูููุงุช README ูู ุงููุดุฑูุน

---

**ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ - 16 ุณุจุชูุจุฑ 2025** โ
