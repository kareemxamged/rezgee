# ุฅุตูุงุญ ูุดุงูู ุฅุถุงูุฉ ุงูููุงูุจ ุงูุฌุฏูุฏุฉ

## ๐ **ุงููุดุงูู ุงูููุญุฏุฏุฉ:**

### **1. ุจุทุก ูู ุงูุชุญุฏูุฏ (Checkbox):**
- ุชุฃุฎูุฑ ูู ุชุญุฏูุซ ุญุงูุฉ ุงูุชุญุฏูุฏ ุนูุฏ ุงูุถุบุท ุนูู checkbox
- ุนุฏู ุงุณุชุฌุงุจุฉ ููุฑูุฉ ููุชูุงุนู

### **2. ุฒุฑ ุงูุญูุธ ูุง ูุนูู:**
- ุฒุฑ ุงูุญูุธ ูุง ูุญุชูู ุนูู ุฏุงูุฉ ูุนููุฉ
- ูุง ูุชู ุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฒุฑ ุงูุญูุธ ูุง ูุชุญูู ุฅูู ุงูููู ุงูุฃุฒุฑู ุนูุฏ ููุก ุงูุญููู

### **3. ุนุฏู ุฑุจุท ุงูุจูุงูุงุช:**
- ุงูุญููู ุชุณุชุฎุฏู `defaultValue` ุจุฏูุงู ูู `value`
- ูุง ููุฌุฏ ุชุญุฏูุซ ููุฑู ููุจูุงูุงุช ุงููุฏุฎูุฉ
- ุนุฏู ูุฌูุฏ ุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

## โ **ุงูุญููู ุงูููุทุจูุฉ:**

### **1. ุฅุตูุงุญ ุจุทุก ุงูุชุญุฏูุฏ:**

#### **ุงุณุชุฎุฏุงู `useCallback` ููุฏูุงู:**
```typescript
const handleSelectTemplate = useCallback((templateId: string) => {
  setSelectedTemplates(prev => {
    const isSelected = prev.includes(templateId);
    if (isSelected) {
      return prev.filter(id => id !== templateId);
    } else {
      return [...prev, templateId];
    }
  });
}, []);

const handleSelectAllTemplates = useCallback(() => {
  setSelectedTemplates(prev => {
    const allSelected = prev.length === emailTemplates.length && emailTemplates.length > 0;
    if (allSelected) {
      return [];
    } else {
      return emailTemplates.map(t => t.id);
    }
  });
}, [emailTemplates]);
```

#### **ุชุญุณูู ุฏุงูุฉ `getSelectedTemplates`:**
```typescript
const getSelectedTemplates = useCallback(() => {
  return emailTemplates.filter(t => selectedTemplates.includes(t.id));
}, [emailTemplates, selectedTemplates]);
```

### **2. ุฅุตูุงุญ ุฒุฑ ุงูุญูุธ:**

#### **ุฅุถุงูุฉ ุญุงูุฉ ุงูุจูุงูุงุช:**
```typescript
const [templateFormData, setTemplateFormData] = useState({
  name: '',
  name_ar: '',
  name_en: '',
  subject_ar: '',
  subject_en: '',
  content_ar: '',
  content_en: '',
  html_template_ar: '',
  html_template_en: '',
  is_active: true
});
```

#### **ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช:**
```typescript
const isTemplateFormValid = useMemo(() => {
  return templateFormData.name.trim() !== '' &&
         templateFormData.name_ar.trim() !== '' &&
         templateFormData.name_en.trim() !== '' &&
         templateFormData.subject_ar.trim() !== '' &&
         templateFormData.subject_en.trim() !== '' &&
         templateFormData.content_ar.trim() !== '' &&
         templateFormData.content_en.trim() !== '';
}, [templateFormData]);
```

#### **ุฏุงูุฉ ุงูุญูุธ ุงููุนููุฉ:**
```typescript
const handleSaveTemplate = async () => {
  if (!isTemplateFormValid) {
    showError('ุจูุงูุงุช ุบูุฑ ููุชููุฉ', 'ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ');
    return;
  }

  try {
    setLoading(true);
    
    const templateData = {
      ...templateFormData,
      created_at: new Date().toISOString(),
      updated_at: new Date().toISOString()
    };

    const result = await EmailNotificationsAdminService.createEmailTemplate(templateData);
    
    if (result && result.success) {
      showSuccess(
        'ุชู ุญูุธ ุงููุงูุจ ุจูุฌุงุญ',
        `ุชู ุฅูุดุงุก ุงููุงูุจ "${templateFormData.name_ar}" ุจูุฌุงุญ ูู ุงููุธุงู`
      );
      setShowTemplateModal(false);
      await refreshData();
    } else {
      showError(
        'ูุดู ูู ุญูุธ ุงููุงูุจ',
        `ุญุฏุซ ุฎุทุฃ ูู ุญูุธ ุงููุงูุจ: ${result?.error || 'ุฎุทุฃ ุบูุฑ ูุนุฑูู'}`
      );
    }
  } catch (error) {
    console.error('ุฎุทุฃ ูู ุญูุธ ุงููุงูุจ:', error);
    showError(
      'ุฎุทุฃ ูู ุญูุธ ุงููุงูุจ',
      'ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน ูู ุญูุธ ุงููุงูุจ. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.'
    );
  } finally {
    setLoading(false);
  }
};
```

### **3. ุฑุจุท ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ:**

#### **ุชุญุฏูุซ ุงูุญููู ูุชุณุชุฎุฏู `value` ู `onChange`:**
```typescript
// ูุซุงู ุนูู ุญูู ุงูุงุณู ุงูุนุงู
<input
  type="text"
  value={templateFormData.name}
  onChange={(e) => setTemplateFormData(prev => ({ ...prev, name: e.target.value }))}
  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent modal-input"
  placeholder="ุงุณู ุงููุงูุจ"
  required
/>
```

#### **ุฅุถุงูุฉ ุนูุงูุงุช ุงูุญููู ุงููุทููุจุฉ:**
- โ ุฅุถุงูุฉ `*` ููุญููู ุงููุทููุจุฉ
- โ ุฅุถุงูุฉ `required` attribute
- โ ุชุญุฏูุซ ุงูุชุณููุงุช ูุชูุถูุญ ุงูุญููู ุงููุทููุจุฉ

### **4. ุฒุฑ ุงูุญูุธ ุงูุฏููุงูููู:**

#### **ุชุบููุฑ ุงูููู ุญุณุจ ุตุญุฉ ุงูุจูุงูุงุช:**
```typescript
<button
  onClick={handleSaveTemplate}
  disabled={!isTemplateFormValid || loading}
  className={`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${
    isTemplateFormValid && !loading
      ? 'bg-blue-600 hover:bg-blue-700 text-white'
      : 'bg-gray-400 text-gray-200 cursor-not-allowed'
  }`}
>
  {loading ? (
    <>
      <RefreshCw className="w-4 h-4 animate-spin" />
      ุฌุงุฑู ุงูุญูุธ...
    </>
  ) : (
    <>
      <Save className="w-4 h-4" />
      ุญูุธ ุงููุงูุจ
    </>
  )}
</button>
```

## ๐ง **ุงูุชุญุณููุงุช ุงูุชูููุฉ:**

### **1. ุงูุฃุฏุงุก:**
- โ ุงุณุชุฎุฏุงู `useCallback` ูููุน ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุฏูุงู
- โ ุงุณุชุฎุฏุงู `useMemo` ููุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- โ ุชุญุฏูุซ ููุฑู ููุญุงูุฉ ุจุฏูู ุชุฃุฎูุฑ

### **2. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:**
- โ ุชุญุฏูุซ ููุฑู ูููู ุฒุฑ ุงูุญูุธ
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ
- โ ุฑุณุงุฆู ูุฌุงุญ ูุน ุชูุงุตูู
- โ ุญุงูุฉ ุชุญููู ุฃุซูุงุก ุงูุญูุธ

### **3. ุงูุชุญูู ูู ุงูุจูุงูุงุช:**
- โ ุงูุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ
- โ ููุน ุงูุญูุธ ุจุฏูู ุจูุงูุงุช ูุงููุฉ
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

## ๐ **ุงููููุงุช ุงูููุญุฏุซุฉ:**

### **`src/components/admin/EmailNotificationsManagement.tsx`:**
- โ ุฅุถุงูุฉ `useCallback` ู `useMemo` ููุงุณุชูุฑุงุฏ
- โ ุฅุถุงูุฉ ุญุงูุฉ `templateFormData`
- โ ุชุญุณูู ุฏูุงู ุงูุชุญุฏูุฏ ูุน `useCallback`
- โ ุฅุถุงูุฉ ุฏุงูุฉ `handleSaveTemplate`
- โ ุฅุถุงูุฉ ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- โ ุชุญุฏูุซ ุฌููุน ุงูุญููู ูุชุณุชุฎุฏู `value` ู `onChange`
- โ ุฅุถุงูุฉ ุฒุฑ ุงูุญูุธ ุงูุฏููุงูููู
- โ ุฅุถุงูุฉ ุฃููููุฉ `Save` ููุงุณุชูุฑุงุฏ

## ๐ **ุงููุชุงุฆุฌ ุงููุชููุนุฉ:**

### **1. ุงูุชุญุฏูุฏ ุงูุณุฑูุน:**
- โ ุงุณุชุฌุงุจุฉ ููุฑูุฉ ุนูุฏ ุงูุถุบุท ุนูู checkbox
- โ ุชุญุฏูุซ ููุฑู ูุญุงูุฉ ุงูุชุญุฏูุฏ
- โ ุฃุฏุงุก ูุญุณู ููุนูููุงุช ุงูุฌูุงุนูุฉ

### **2. ุฅุถุงูุฉ ุงูููุงูุจ:**
- โ ุฒุฑ ุงูุญูุธ ูุชุญูู ุฅูู ุฃุฒุฑู ุนูุฏ ููุก ุงูุญููู
- โ ุญูุธ ูุนูู ููุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฑุณุงุฆู ูุฌุงุญ ูุฎุทุฃ ูุงุถุญุฉ
- โ ุชุญุฏูุซ ููุฑู ูููุงุฆูุฉ ุจุนุฏ ุงูุญูุธ

### **3. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ:**
- โ ุชุญุฏูุซ ููุฑู ูููุงุฌูุฉ
- โ ุฑุณุงุฆู ูุงุถุญุฉ ููููุฏุฉ
- โ ููุน ุงูุฃุฎุทุงุก ูุจู ุญุฏูุซูุง
- โ ุญุงูุฉ ุชุญููู ูุงุถุญุฉ

## ๐งช **ุงุฎุชุจุงุฑ ุงููุธุงู:**

### **1. ุงุฎุชุจุงุฑ ุงูุชุญุฏูุฏ:**
1. โ ุงูุถุบุท ุนูู checkbox ูุฑุฏู
2. โ ุงูุถุบุท ุนูู "ุชุญุฏูุฏ ุงููู"
3. โ ุงูุชุญูู ูู ุงูุงุณุชุฌุงุจุฉ ุงูููุฑูุฉ
4. โ ุงุฎุชุจุงุฑ ุงูุนูููุงุช ุงูุฌูุงุนูุฉ

### **2. ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุงููุงูุจ:**
1. โ ูุชุญ ูุงูุฐุฉ ุฅุถุงูุฉ ูุงูุจ ุฌุฏูุฏ
2. โ ููุก ุงูุญููู ุงููุทููุจุฉ
3. โ ูุฑุงูุจุฉ ุชุบููุฑ ููู ุฒุฑ ุงูุญูุธ
4. โ ุงูุถุบุท ุนูู ุญูุธ ูุงูุชุญูู ูู ุงููุฌุงุญ
5. โ ุงูุชุญูู ูู ุธููุฑ ุงููุงูุจ ูู ุงููุงุฆูุฉ

### **3. ุงุฎุชุจุงุฑ ุงูุชุญูู ูู ุงูุจูุงูุงุช:**
1. โ ูุญุงููุฉ ุงูุญูุธ ุจุฏูู ููุก ุงูุญููู
2. โ ุงูุชุญูู ูู ุฑุณุงูุฉ ุงูุฎุทุฃ
3. โ ููุก ุงูุญููู ูุงูุชุญูู ูู ุชูุนูู ุงูุฒุฑ

## โ๏ธ **ููุงุญุธุงุช ูููุฉ:**

### **1. ุงูุญููู ุงููุทููุจุฉ:**
- ุงูุงุณู ุงูุนุงู *
- ุงูุงุณู ุงูุนุฑุจู *
- ุงูุงุณู ุงูุฅูุฌููุฒู *
- ุงูููุถูุน ุงูุนุฑุจู *
- ุงูููุถูุน ุงูุฅูุฌููุฒู *
- ุงููุญุชูู ุงูุนุฑุจู *
- ุงููุญุชูู ุงูุฅูุฌููุฒู *

### **2. ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ:**
- HTML ุงูุนุฑุจู
- HTML ุงูุฅูุฌููุฒู
- ุงูุญุงูุฉ (ูุดุท/ูุนุทู)

### **3. ุงูุชุญูู ูู ุงูุจูุงูุงุช:**
- ูุชู ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ููู ูุงุฑุบุฉ
- ูุชู ุงูุชุญูู ูู ูุฌูุฏ ูุณุงูุงุช ููุท
- ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุญูุธ

## ๐ฏ **ุงูุฎูุงุตุฉ:**

ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุจูุฌุงุญ:

1. **โ ุจุทุก ุงูุชุญุฏูุฏ:** ุชู ุญูู ุจุงุณุชุฎุฏุงู `useCallback` ูุชุญุณูู ุงูุฃุฏุงุก
2. **โ ุฒุฑ ุงูุญูุธ:** ุชู ุฅุตูุงุญู ูุน ุฅุถุงูุฉ ุฏุงูุฉ ุญูุธ ูุนููุฉ ูุชุบููุฑ ููู ุฏููุงูููู
3. **โ ุฑุจุท ุงูุจูุงูุงุช:** ุชู ุฑุจุท ุฌููุน ุงูุญููู ุจุญุงูุฉ ุงููููู ูุน ุชุญุฏูุซ ููุฑู
4. **โ ุงูุชุญูู ูู ุงูุจูุงูุงุช:** ุชู ุฅุถุงูุฉ ุชุญูู ุดุงูู ูุน ุฑุณุงุฆู ูุงุถุญุฉ

ุงููุธุงู ุงูุขู ูุนูู ุจููุงุกุฉ ุนุงููุฉ ูุน ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ!





