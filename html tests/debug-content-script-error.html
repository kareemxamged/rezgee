<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ´Ø®ÙŠØµ Ø®Ø·Ø£ Content Script</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
            direction: rtl;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .error-box {
            background: #fee;
            border: 1px solid #fcc;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: monospace;
            direction: ltr;
            text-align: left;
        }
        .solution {
            background: #efe;
            border: 1px solid #cfc;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .extension-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ØªØ´Ø®ÙŠØµ ÙˆØ­Ù„ Ø®Ø·Ø£ Content Script</h1>
        
        <div class="error-box">
            <strong>Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ù…Ø¨Ù„Øº Ø¹Ù†Ù‡:</strong><br>
            content_script.js:1 Uncaught TypeError: Cannot read properties of null (reading 'deref')<br>
            at MutationObserver.&lt;anonymous&gt; (content_script.js:1:419650)
        </div>

        <h2>ğŸ“‹ ØªØ´Ø®ÙŠØµ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</h2>
        
        <div class="warning">
            <strong>âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©:</strong><br>
            Ù‡Ø°Ø§ Ø§Ù„Ø®Ø·Ø£ Ù„ÙŠØ³ Ù…Ù† ÙƒÙˆØ¯ Ù…Ø´Ø±ÙˆØ¹ÙƒØŒ Ø¨Ù„ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ù…ØªØµÙØ­ (Browser Extension) Ù…Ø«Ø¨ØªØ© Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØµÙØ­.
        </div>

        <h3>ğŸ” Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ</h3>
        
        <div class="step">
            <strong>1. ÙØ­Øµ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…Ø«Ø¨ØªØ©:</strong>
            <button onclick="checkExtensions()">ÙØ­Øµ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª</button>
            <div id="extensionsList" class="extension-list" style="display:none;">
                <p>Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…Ø´ØªØ¨Ù‡ Ø¨Ù‡Ø§:</p>
                <ul>
                    <li>Ù…Ø¯Ø±Ø§Ø¡ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± (LastPass, 1Password, Bitwarden)</li>
                    <li>Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ±Ø¬Ù…Ø© (Google Translate)</li>
                    <li>Ø­Ø§Ø¬Ø¨Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª (AdBlock, uBlock Origin)</li>
                    <li>Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ·ÙˆÙŠØ± (React DevTools, Vue DevTools)</li>
                    <li>Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ø£Ù…Ø§Ù† (Malwarebytes, Kaspersky)</li>
                </ul>
            </div>
        </div>

        <div class="step">
            <strong>2. Ø§Ø®ØªØ¨Ø§Ø± ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø®ÙÙŠ:</strong>
            <button onclick="testIncognito()">Ø¥Ø±Ø´Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
            <div id="incognitoTest" style="display:none;">
                <p>Ø§ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø®ÙÙŠ (Ctrl+Shift+N) ÙˆØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„Ø®Ø·Ø£</p>
            </div>
        </div>

        <div class="step">
            <strong>3. ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª ØªØ¯Ø±ÙŠØ¬ÙŠØ§Ù‹:</strong>
            <button onclick="showDisableSteps()">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·ÙˆØ§Øª</button>
            <div id="disableSteps" style="display:none;">
                <ol>
                    <li>Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ chrome://extensions/</li>
                    <li>Ø¹Ø·Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª</li>
                    <li>Ø£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹</li>
                    <li>ÙØ¹Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª ÙˆØ§Ø­Ø¯Ø© ØªÙ„Ùˆ Ø§Ù„Ø£Ø®Ø±Ù‰ Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„Ù…Ø´ÙƒÙ„Ø©</li>
                </ol>
            </div>
        </div>

        <h2>ğŸ› ï¸ Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©</h2>

        <div class="solution">
            <h3>Ø§Ù„Ø­Ù„ 1: Ø­Ù…Ø§ÙŠØ© ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† ØªØ¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª</h3>
            <p>Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ø­Ù…Ø§ÙŠØ© ÙÙŠ Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù„Ù…Ù†Ø¹ ØªØ¯Ø§Ø®Ù„ Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…ØªØµÙØ­:</p>
            <button onclick="showProtectionCode()">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆØ¯</button>
            <div id="protectionCode" style="display:none;">
                <pre style="background:#f8f9fa; padding:10px; border-radius:5px; overflow-x:auto;">
// Ø¥Ø¶Ø§ÙØ© Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ index.html Ø£Ùˆ main.tsx
window.addEventListener('error', function(e) {
  // ØªØ¬Ø§Ù‡Ù„ Ø£Ø®Ø·Ø§Ø¡ content scripts Ù…Ù† Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª
  if (e.filename && e.filename.includes('content_script')) {
    e.preventDefault();
    console.warn('ØªÙ… ØªØ¬Ø§Ù‡Ù„ Ø®Ø·Ø£ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ù…ØªØµÙØ­:', e.message);
    return true;
  }
});

// Ø­Ù…Ø§ÙŠØ© MutationObserver Ù…Ù† Ø§Ù„ØªØ¯Ø§Ø®Ù„
const originalMutationObserver = window.MutationObserver;
window.MutationObserver = function(callback) {
  return new originalMutationObserver(function(mutations, observer) {
    try {
      callback.call(this, mutations, observer);
    } catch (error) {
      if (error.message.includes('deref')) {
        console.warn('ØªÙ… ØªØ¬Ø§Ù‡Ù„ Ø®Ø·Ø£ MutationObserver Ù…Ù† Ø¥Ø¶Ø§ÙØ©:', error.message);
        return;
      }
      throw error;
    }
  });
};
                </pre>
            </div>
        </div>

        <div class="solution">
            <h3>Ø§Ù„Ø­Ù„ 2: ØªØ­Ø³ÙŠÙ† Ø£Ù…Ø§Ù† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬</h3>
            <p>ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø¶Ø¯ ØªØ¯Ø§Ø®Ù„ Ø¥Ø¶Ø§ÙØ§Øª Ù…Ø¯Ø±Ø§Ø¡ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±:</p>
            <button onclick="showFormProtection()">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆØ¯</button>
            <div id="formProtection" style="display:none;">
                <pre style="background:#f8f9fa; padding:10px; border-radius:5px; overflow-x:auto;">
// Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ù…Ù† Ø§Ù„ØªØ¯Ø§Ø®Ù„
document.addEventListener('DOMContentLoaded', function() {
  // Ù…Ù†Ø¹ Ø¥Ø¶Ø§ÙØ§Øª Ù…Ø¯Ø±Ø§Ø¡ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù† Ø§Ù„ØªØ¯Ø§Ø®Ù„
  const forms = document.querySelectorAll('form');
  forms.forEach(form => {
    form.setAttribute('data-form-type', 'other');
    
    const inputs = form.querySelectorAll('input[type="password"]');
    inputs.forEach(input => {
      input.setAttribute('data-lpignore', 'true');
      input.setAttribute('data-1p-ignore', 'true');
      input.setAttribute('data-bwignore', 'true');
    });
  });
});
                </pre>
            </div>
        </div>

        <div class="solution">
            <h3>Ø§Ù„Ø­Ù„ 3: Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬ Ø£Ø®Ø·Ø§Ø¡ Ø¹Ø§Ù…</h3>
            <p>Ù…Ø¹Ø§Ù„Ø¬ Ø´Ø§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª:</p>
            <button onclick="showErrorHandler()">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆØ¯</button>
            <div id="errorHandler" style="display:none;">
                <pre style="background:#f8f9fa; padding:10px; border-radius:5px; overflow-x:auto;">
// Ù…Ø¹Ø§Ù„Ø¬ Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ù…Ù„
(function() {
  'use strict';
  
  // Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø£Ø³Ù…Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
  const extensionFiles = [
    'content_script',
    'contentscript',
    'inject',
    'extension',
    'chrome-extension',
    'moz-extension'
  ];
  
  // Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…
  window.addEventListener('error', function(event) {
    const isExtensionError = extensionFiles.some(file => 
      event.filename && event.filename.includes(file)
    );
    
    if (isExtensionError) {
      console.warn('ğŸ”§ ØªÙ… ØªØ¬Ø§Ù‡Ù„ Ø®Ø·Ø£ Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ù…ØªØµÙØ­:', {
        message: event.message,
        filename: event.filename,
        lineno: event.lineno
      });
      event.preventDefault();
      return true;
    }
  }, true);
  
  // Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ØºÙŠØ± Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
  window.addEventListener('unhandledrejection', function(event) {
    if (event.reason && event.reason.stack) {
      const isExtensionError = extensionFiles.some(file => 
        event.reason.stack.includes(file)
      );
      
      if (isExtensionError) {
        console.warn('ğŸ”§ ØªÙ… ØªØ¬Ø§Ù‡Ù„ Promise rejection Ù…Ù† Ø¥Ø¶Ø§ÙØ© Ù…ØªØµÙØ­:', event.reason);
        event.preventDefault();
        return true;
      }
    }
  });
})();
                </pre>
            </div>
        </div>

        <h2>ğŸ¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ÙŠ</h2>
        
        <div class="step">
            <strong>Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ†:</strong>
            <button onclick="implementSolution()">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù„</button>
            <div id="implementationSteps" style="display:none;">
                <ol>
                    <li>Ø£Ø¶Ù Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ù…Ù„Ù <code>index.html</code></li>
                    <li>Ø£Ø¶Ù Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ÙÙŠ Ù…ÙƒÙˆÙ†Ø§Øª React</li>
                    <li>Ø§Ø®ØªØ¨Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø¹ Ø¥Ø¶Ø§ÙØ§Øª Ù…Ø®ØªÙ„ÙØ©</li>
                    <li>Ø±Ø§Ù‚Ø¨ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… Ø¸Ù‡ÙˆØ± Ø§Ù„Ø£Ø®Ø·Ø§Ø¡</li>
                </ol>
            </div>
        </div>

        <div class="step">
            <strong>Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:</strong>
            <button onclick="showUserSolutions()">Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</button>
            <div id="userSolutions" style="display:none;">
                <ul>
                    <li>ØªØ­Ø¯ÙŠØ« Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø£Ø­Ø¯Ø« Ø¥ØµØ¯Ø§Ø±</li>
                    <li>ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª ØºÙŠØ± Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©</li>
                    <li>Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ¶Ø¹ Ø§Ù„ØªØµÙØ­ Ø§Ù„Ø®ÙÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±</li>
                    <li>ØªÙ†Ø¸ÙŠÙ Ø°Ø§ÙƒØ±Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª Ù„Ù„Ù…ØªØµÙØ­</li>
                </ul>
            </div>
        </div>

        <div class="warning">
            <strong>ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø©:</strong><br>
            Ù‡Ø°Ø§ Ø§Ù„Ø®Ø·Ø£ Ù„Ø§ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ ÙˆØ¸Ø§Ø¦Ù Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŒ Ù„ÙƒÙ† Ù‚Ø¯ ÙŠØ³Ø¨Ø¨ Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ Ù…Ø²Ø¹Ø¬Ø© ÙÙŠ ÙˆØ­Ø¯Ø© Ø§Ù„ØªØ­ÙƒÙ….
        </div>
    </div>

    <script>
        function checkExtensions() {
            document.getElementById('extensionsList').style.display = 'block';
        }
        
        function testIncognito() {
            document.getElementById('incognitoTest').style.display = 'block';
        }
        
        function showDisableSteps() {
            document.getElementById('disableSteps').style.display = 'block';
        }
        
        function showProtectionCode() {
            document.getElementById('protectionCode').style.display = 'block';
        }
        
        function showFormProtection() {
            document.getElementById('formProtection').style.display = 'block';
        }
        
        function showErrorHandler() {
            document.getElementById('errorHandler').style.display = 'block';
        }
        
        function implementSolution() {
            document.getElementById('implementationSteps').style.display = 'block';
        }
        
        function showUserSolutions() {
            document.getElementById('userSolutions').style.display = 'block';
        }
    </script>
</body>
</html>
