-- Insert Enhanced Marriage Tips Articles (نصائح الزواج)
-- This file contains comprehensive and practical articles about marriage tips and advice
-- Created as part of the articles system enhancement

DO $$
DECLARE
    marriage_tips_id UUID;
    sample_user_id UUID;
    dr_layla_id UUID;
    dr_khalid_id UUID;
    dr_maryam_id UUID;
    counselor_sara_id UUID;
BEGIN
    -- Get category ID
    SELECT id INTO marriage_tips_id FROM article_categories WHERE name = 'نصائح الزواج';
    
    -- Get a sample user ID
    SELECT id INTO sample_user_id FROM users LIMIT 1;
    
    -- Create specialized authors for marriage tips articles
    IF sample_user_id IS NULL THEN
        -- Create Dr. Layla Al-Ansari - Marriage Counselor
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('dr.layla@rezge.com', 'د. ليلى الأنصاري', 'مستشارة زواج وعلاقات أسرية', 'دكتورة في علم النفس الأسري، مستشارة زواج معتمدة، لها خبرة 18 عاماً في مجال الاستشارات الزوجية والأسرية، مؤلفة كتاب "أسرار الحياة الزوجية السعيدة"')
        RETURNING id INTO dr_layla_id;
        
        -- Create Dr. Khalid Al-Rashid - Family Therapist
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('dr.khalid@rezge.com', 'د. خالد الراشد', 'معالج أسري ومستشار زواج', 'دكتور في العلاج الأسري، متخصص في حل النزاعات الزوجية، له خبرة 15 عاماً في العلاج النفسي والأسري، حاصل على شهادات دولية في الإرشاد الزوجي')
        RETURNING id INTO dr_khalid_id;
        
        -- Create Dr. Maryam Al-Zahra - Relationship Expert
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('dr.maryam@rezge.com', 'د. مريم الزهراء', 'خبيرة العلاقات الزوجية', 'دكتورة في علم الاجتماع الأسري، خبيرة في تطوير العلاقات الزوجية، مدربة معتمدة في التواصل الفعال، لها عدة مؤلفات في مجال الأسرة والزواج')
        RETURNING id INTO dr_maryam_id;
        
        -- Create Sara Al-Mahmoud - Certified Counselor
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('sara.mahmoud@rezge.com', 'أ. سارة المحمود', 'مستشارة أسرية معتمدة', 'مستشارة أسرية معتمدة، متخصصة في الإرشاد الزوجي والأسري، حاصلة على ماجستير في الإرشاد النفسي، لها خبرة 12 عاماً في مساعدة الأزواج')
        RETURNING id INTO counselor_sara_id;
        
        -- Set default author
        sample_user_id := dr_layla_id;
    ELSE
        dr_layla_id := sample_user_id;
        dr_khalid_id := sample_user_id;
        dr_maryam_id := sample_user_id;
        counselor_sara_id := sample_user_id;
    END IF;
    
    -- Insert comprehensive Marriage Tips Articles
    INSERT INTO articles (title, excerpt, content, author_id, category_id, tags, published_at, read_time, views, likes, comments_count, featured, status) VALUES
    
    -- Article 1: أسرار الحياة الزوجية السعيدة
    (
        'أسرار الحياة الزوجية السعيدة: دليل شامل للأزواج الجدد',
        'اكتشف الأسرار والمبادئ الأساسية التي تجعل الحياة الزوجية سعيدة ومستقرة، مع نصائح عملية مجربة من خبراء العلاقات الأسرية لبناء زواج قوي ومتين.',
        '<div class="article-content">
<h2>💕 مقدمة: أهمية السعادة الزوجية</h2>
<p>الحياة الزوجية السعيدة لا تحدث بالصدفة، بل تحتاج إلى جهد مشترك وفهم متبادل بين الزوجين، وتطبيق مبادئ أساسية تضمن الاستقرار والسعادة. إن بناء زواج ناجح يتطلب استثماراً يومياً في العلاقة والتفاهم المستمر.</p>

<h2>🗣️ التواصل الفعال: أساس العلاقة الناجحة</h2>
<p>التواصل هو العمود الفقري لأي علاقة زوجية ناجحة، وهو المفتاح لحل المشاكل وتعميق الفهم المتبادل.</p>

<h3>مبادئ التواصل الفعال:</h3>
<ul>
<li><strong>الاستماع النشط:</strong> إعطاء الشريك الاهتمام الكامل عند الحديث دون مقاطعة</li>
<li><strong>التعبير الواضح:</strong> التعبير عن المشاعر والأفكار بوضوح ودون غموض</li>
<li><strong>تجنب الانتقاد المدمر:</strong> النقد البناء بدلاً من الهجوم الشخصي</li>
<li><strong>الحوار الهادئ:</strong> مناقشة المشاكل بهدوء وعقلانية دون انفعال</li>
<li><strong>اختيار الوقت المناسب:</strong> عدم مناقشة الأمور المهمة في أوقات التوتر</li>
</ul>

<h3>تقنيات التواصل العملية:</h3>
<ul>
<li><strong>استخدام "أنا" بدلاً من "أنت":</strong> "أنا أشعر بـ..." بدلاً من "أنت دائماً..."</li>
<li><strong>التأكيد على المشاعر:</strong> "أفهم أنك تشعر بـ..."</li>
<li><strong>طرح الأسئلة المفتوحة:</strong> "كيف تشعر حيال...؟"</li>
<li><strong>التلخيص والتأكيد:</strong> "إذن ما تقصده هو..."</li>
</ul>

<h2>🤝 الاحترام المتبادل: أساس الثقة</h2>
<p>الاحترام المتبادل يجب أن يسود في جميع جوانب العلاقة الزوجية، وهو أساس بناء الثقة والمحبة.</p>

<h3>مظاهر الاحترام:</h3>
<ul>
<li><strong>احترام الآراء:</strong> تقدير وجهات النظر المختلفة حتى لو لم نتفق معها</li>
<li><strong>احترام الخصوصية:</strong> إعطاء مساحة شخصية لكل طرف</li>
<li><strong>تقدير الجهود:</strong> الاعتراف بما يقوم به الشريك وشكره عليه</li>
<li><strong>عدم التقليل:</strong> عدم التقليل من شأن الآخر أمام الناس</li>
<li><strong>احترام الحدود:</strong> فهم واحترام حدود الشريك الشخصية</li>
</ul>

<h3>بناء الثقة:</h3>
<ul>
<li><strong>الصدق والشفافية:</strong> في جميع التعاملات</li>
<li><strong>الوفاء بالوعود:</strong> تنفيذ ما نتعهد به</li>
<li><strong>الاعتذار عند الخطأ:</strong> الاعتراف بالأخطاء والاعتذار الصادق</li>
<li><strong>الثبات في المواقف:</strong> عدم التذبذب في القرارات المهمة</li>
</ul>

<h2>🤝 المشاركة والتعاون: فريق واحد</h2>
<p>الزواج الناجح يقوم على مبدأ الشراكة والتعاون، حيث يعمل الزوجان كفريق واحد لتحقيق أهدافهما المشتركة.</p>

<h3>مجالات المشاركة:</h3>
<ul>
<li><strong>تقسيم المسؤوليات:</strong> توزيع المهام المنزلية والأسرية بعدالة</li>
<li><strong>اتخاذ القرارات معاً:</strong> المشاركة في القرارات المهمة</li>
<li><strong>دعم الأهداف:</strong> دعم أهداف وطموحات الشريك</li>
<li><strong>العمل كفريق:</strong> مواجهة التحديات والصعوبات معاً</li>
<li><strong>التخطيط المشترك:</strong> وضع خطط مستقبلية مشتركة</li>
</ul>

<h3>التعاون في الحياة اليومية:</h3>
<ul>
<li><strong>الأعمال المنزلية:</strong> تقسيم المهام حسب القدرات والظروف</li>
<li><strong>رعاية الأطفال:</strong> المشاركة في التربية والرعاية</li>
<li><strong>الأمور المالية:</strong> التعاون في إدارة الميزانية</li>
<li><strong>القرارات الاجتماعية:</strong> الاتفاق على الأنشطة والزيارات</li>
</ul>

<h2>❤️ إظهار المحبة والتقدير</h2>
<p>التعبير عن المحبة والتقدير بشكل منتظم يقوي الرابطة الزوجية ويزيد من السعادة المشتركة.</p>

<h3>طرق إظهار المحبة:</h3>
<ul>
<li><strong>الكلمات الطيبة:</strong> التعبير عن المشاعر بالكلمات</li>
<li><strong>الأفعال الصغيرة:</strong> القيام بأشياء بسيطة تسعد الشريك</li>
<li><strong>الهدايا الرمزية:</strong> تقديم هدايا بسيطة ومعبرة</li>
<li><strong>قضاء الوقت معاً:</strong> تخصيص وقت خاص للزوجين</li>
<li><strong>اللمس الحنون:</strong> العناق والقبلات والمصافحة</li>
</ul>

<h3>لغات الحب الخمس:</h3>
<ol>
<li><strong>كلمات التشجيع:</strong> المدح والثناء والتشجيع</li>
<li><strong>قضاء الوقت:</strong> إعطاء الاهتمام والوقت الكامل</li>
<li><strong>تلقي الهدايا:</strong> تقديم هدايا رمزية ومعبرة</li>
<li><strong>أعمال الخدمة:</strong> القيام بأعمال تساعد الشريك</li>
<li><strong>اللمس الجسدي:</strong> التعبير عن المحبة باللمس</li>
</ol>

<h2>⚖️ التوازن بين الحياة الشخصية والزوجية</h2>
<p>الحفاظ على التوازن بين الاحتياجات الشخصية ومتطلبات الحياة الزوجية أمر ضروري للسعادة.</p>

<h3>الحياة الشخصية:</h3>
<ul>
<li><strong>الهوايات الشخصية:</strong> الحفاظ على الاهتمامات الفردية</li>
<li><strong>الأصدقاء:</strong> الحفاظ على العلاقات الاجتماعية</li>
<li><strong>التطوير الذاتي:</strong> الاستمرار في التعلم والنمو</li>
<li><strong>الوقت الشخصي:</strong> تخصيص وقت للراحة والتأمل</li>
</ul>

<h3>الحياة الزوجية:</h3>
<ul>
<li><strong>الوقت المشترك:</strong> تخصيص وقت للأنشطة المشتركة</li>
<li><strong>الأهداف المشتركة:</strong> العمل على تحقيق أهداف مشتركة</li>
<li><strong>التقاليد الأسرية:</strong> إنشاء تقاليد خاصة بالأسرة</li>
<li><strong>الدعم المتبادل:</strong> دعم بعضكما في الأوقات الصعبة</li>
</ul>
</div>',
        dr_layla_id,
        marriage_tips_id,
        ARRAY['الحياة الزوجية', 'السعادة الزوجية', 'التواصل الفعال', 'الاحترام المتبادل', 'المشاركة', 'المحبة'],
        NOW() - INTERVAL '12 days',
        16,
        2350,
        189,
        47,
        true,
        'published'
    ),

    -- Article 2: حل المشاكل الزوجية بحكمة
    (
        'حل المشاكل الزوجية بحكمة: استراتيجيات عملية للتعامل مع الخلافات',
        'تعلم كيفية التعامل مع المشاكل والخلافات الزوجية بطريقة بناءة وحكيمة، مع استراتيجيات عملية مجربة لحل النزاعات وتقوية العلاقة الزوجية.',
        '<div class="article-content">
<h2>🤔 فهم طبيعة المشاكل الزوجية</h2>
<p>المشاكل الزوجية أمر طبيعي في أي علاقة، والمهم ليس تجنبها تماماً بل تعلم كيفية التعامل معها بطريقة بناءة تقوي العلاقة بدلاً من إضعافها.</p>

<h3>أنواع المشاكل الزوجية:</h3>
<ul>
<li><strong>مشاكل التواصل:</strong> سوء الفهم وعدم التعبير الواضح</li>
<li><strong>المشاكل المالية:</strong> الخلافات حول الإنفاق والميزانية</li>
<li><strong>مشاكل التربية:</strong> الاختلاف في أساليب تربية الأطفال</li>
<li><strong>مشاكل الأهل:</strong> التدخل الزائد من الأهل والأقارب</li>
<li><strong>مشاكل الوقت:</strong> عدم تخصيص وقت كافٍ للعلاقة</li>
<li><strong>المشاكل العاطفية:</strong> عدم إشباع الحاجات العاطفية</li>
</ul>

<h3>أسباب المشاكل الزوجية:</h3>
<ul>
<li><strong>التوقعات غير الواقعية:</strong> توقع الكمال من الشريك</li>
<li><strong>ضعف التواصل:</strong> عدم التعبير عن المشاعر والحاجات</li>
<li><strong>الضغوط الخارجية:</strong> ضغوط العمل والحياة</li>
<li><strong>اختلاف القيم:</strong> عدم التوافق في المبادئ الأساسية</li>
<li><strong>قلة الوقت المشترك:</strong> انشغال كل طرف بأموره</li>
</ul>

<h2>🛠️ استراتيجيات حل المشاكل</h2>

<h3>1. تحديد المشكلة الحقيقية</h3>
<ul>
<li><strong>التركيز على الجوهر:</strong> تحديد السبب الحقيقي وراء المشكلة</li>
<li><strong>تجنب التعميم:</strong> عدم استخدام كلمات مثل "دائماً" و"أبداً"</li>
<li><strong>الفصل بين المشاعر والحقائق:</strong> التمييز بين ما نشعر به وما يحدث فعلاً</li>
<li><strong>تحديد الأولويات:</strong> التركيز على المشاكل الأهم أولاً</li>
</ul>

<h3>2. اختيار الوقت والمكان المناسبين</h3>
<ul>
<li><strong>تجنب أوقات التوتر:</strong> عدم مناقشة المشاكل عند الغضب</li>
<li><strong>اختيار مكان هادئ:</strong> بعيداً عن المشتتات</li>
<li><strong>ضمان الخصوصية:</strong> عدم مناقشة المشاكل أمام الآخرين</li>
<li><strong>تخصيص وقت كافٍ:</strong> عدم التسرع في الحل</li>
</ul>

<h3>3. تطبيق قواعد الحوار البناء</h3>
<ul>
<li><strong>الاستماع أولاً:</strong> فهم وجهة نظر الشريك قبل الرد</li>
<li><strong>التحدث بهدوء:</strong> تجنب رفع الصوت أو الانفعال</li>
<li><strong>استخدام لغة إيجابية:</strong> التركيز على الحلول وليس اللوم</li>
<li><strong>تجنب الهجوم الشخصي:</strong> انتقاد السلوك وليس الشخص</li>
</ul>

<h2>🎯 خطوات حل المشكلة</h2>

<h3>الخطوة الأولى: التهدئة والاستعداد</h3>
<ul>
<li><strong>أخذ نفس عميق:</strong> للتهدئة والتفكير الواضح</li>
<li><strong>تذكر المحبة:</strong> التركيز على المشاعر الإيجابية</li>
<li><strong>تحديد الهدف:</strong> الوصول لحل وليس الانتصار</li>
<li><strong>الاستعداد للتنازل:</strong> المرونة في الموقف</li>
</ul>

<h3>الخطوة الثانية: التعبير عن المشكلة</h3>
<ul>
<li><strong>وصف المشاعر:</strong> "أشعر بـ..." بدلاً من "أنت تفعل..."</li>
<li><strong>ذكر الحقائق:</strong> التركيز على الأحداث الفعلية</li>
<li><strong>تجنب التاريخ القديم:</strong> عدم إثارة مشاكل الماضي</li>
<li><strong>طلب التوضيح:</strong> "هل يمكنك أن توضح لي...؟"</li>
</ul>

<h3>الخطوة الثالثة: الاستماع للشريك</h3>
<ul>
<li><strong>الإنصات الكامل:</strong> عدم المقاطعة أو التفكير في الرد</li>
<li><strong>طرح الأسئلة:</strong> للفهم الأعمق</li>
<li><strong>التأكيد على الفهم:</strong> "إذن ما تقصده هو..."</li>
<li><strong>إظهار التعاطف:</strong> "أفهم أنك تشعر بـ..."</li>
</ul>

<h3>الخطوة الرابعة: البحث عن الحلول</h3>
<ul>
<li><strong>العصف الذهني:</strong> طرح جميع الحلول الممكنة</li>
<li><strong>تقييم الخيارات:</strong> مناقشة إيجابيات وسلبيات كل حل</li>
<li><strong>البحث عن حلول وسط:</strong> التنازل المتبادل</li>
<li><strong>الاتفاق على خطة:</strong> تحديد خطوات واضحة للتنفيذ</li>
</ul>

<h3>الخطوة الخامسة: التنفيذ والمتابعة</h3>
<ul>
<li><strong>تحديد المسؤوليات:</strong> من سيفعل ماذا ومتى</li>
<li><strong>وضع جدول زمني:</strong> تحديد مواعيد للتنفيذ</li>
<li><strong>المتابعة الدورية:</strong> مراجعة التقدم</li>
<li><strong>التعديل عند الحاجة:</strong> مرونة في التطبيق</li>
</ul>

<h2>🚫 أخطاء شائعة في حل المشاكل</h2>

<h3>أخطاء في التواصل:</h3>
<ul>
<li><strong>المقاطعة المستمرة:</strong> عدم إعطاء الشريك فرصة للتعبير</li>
<li><strong>رفع الصوت:</strong> الصراخ أو الانفعال الزائد</li>
<li><strong>استخدام كلمات جارحة:</strong> السب أو التجريح</li>
<li><strong>التهديد:</strong> التهديد بالطلاق أو الانفصال</li>
</ul>

<h3>أخطاء في التفكير:</h3>
<ul>
<li><strong>قراءة الأفكار:</strong> افتراض ما يفكر فيه الشريك</li>
<li><strong>التعميم:</strong> استخدام "دائماً" و"أبداً"</li>
<li><strong>التركيز على الماضي:</strong> إثارة مشاكل قديمة</li>
<li><strong>البحث عن المذنب:</strong> بدلاً من البحث عن الحل</li>
</ul>

<h3>أخطاء في السلوك:</h3>
<ul>
<li><strong>تجاهل المشكلة:</strong> عدم مواجهة المشاكل</li>
<li><strong>الهروب من النقاش:</strong> تجنب الحديث عن المشكلة</li>
<li><strong>العناد:</strong> رفض التنازل أو التفاهم</li>
<li><strong>إشراك الآخرين:</strong> مناقشة المشاكل مع الأهل والأصدقاء</li>
</ul>

<h2>💡 نصائح للوقاية من المشاكل</h2>

<h3>التواصل المستمر:</h3>
<ul>
<li><strong>الحديث اليومي:</strong> تخصيص وقت للحديث كل يوم</li>
<li><strong>التعبير عن المشاعر:</strong> عدم كتمان المشاعر</li>
<li><strong>الاستفسار عن الأحوال:</strong> السؤال عن يوم الشريك</li>
<li><strong>مشاركة الأفكار:</strong> التحدث عن الأحلام والخطط</li>
</ul>

<h3>بناء الثقة:</h3>
<ul>
<li><strong>الصدق المستمر:</strong> في جميع الأمور</li>
<li><strong>الوفاء بالوعود:</strong> تنفيذ ما نتعهد به</li>
<li><strong>الشفافية:</strong> عدم إخفاء الأمور المهمة</li>
<li><strong>الاعتذار عند الخطأ:</strong> الاعتراف بالأخطاء</li>
</ul>

<h3>الاستثمار في العلاقة:</h3>
<ul>
<li><strong>قضاء وقت مميز:</strong> أنشطة مشتركة ممتعة</li>
<li><strong>التعلم المستمر:</strong> قراءة كتب عن العلاقات</li>
<li><strong>طلب المساعدة:</strong> استشارة المختصين عند الحاجة</li>
<li><strong>التقدير المستمر:</strong> شكر الشريك على جهوده</li>
</ul>

<h2>🎯 خاتمة</h2>
<p>حل المشاكل الزوجية بحكمة يتطلب صبراً وحكمة ومهارات تواصل جيدة. والهدف ليس تجنب المشاكل تماماً، بل تعلم كيفية التعامل معها بطريقة تقوي العلاقة وتزيد من التفاهم.</p>

<p><strong>تذكروا أن كل مشكلة تحلونها معاً تجعل علاقتكم أقوى وأكثر نضجاً.</strong></p>
</div>',
        dr_khalid_id,
        marriage_tips_id,
        ARRAY['حل المشاكل', 'الخلافات الزوجية', 'التواصل البناء', 'النزاعات', 'الحوار الهادف'],
        NOW() - INTERVAL '9 days',
        14,
        1890,
        142,
        38,
        true,
        'published'
    );

END $$;
