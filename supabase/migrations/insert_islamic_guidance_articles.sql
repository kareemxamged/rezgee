-- Insert Islamic Guidance Articles (الإرشاد الإسلامي) - Enhanced Version
-- This file contains comprehensive articles about Islamic guidance for marriage and courtship

DO $$
DECLARE
    islamic_guidance_id UUID;
    sample_user_id UUID;
    dr_ahmed_id UUID;
    dr_fatima_id UUID;
    dr_omar_id UUID;
    sheikh_hassan_id UUID;
BEGIN
    -- Get category ID
    SELECT id INTO islamic_guidance_id FROM article_categories WHERE name = 'الإرشاد الإسلامي';

    -- Get a sample user ID
    SELECT id INTO sample_user_id FROM users LIMIT 1;

    -- Create specialized authors for Islamic guidance articles
    IF sample_user_id IS NULL THEN
        -- Create Dr. Ahmed Al-Sharif - Islamic Law Expert
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('dr.ahmed@rezgee.com', 'د. أحمد الشريف', 'دكتور في الشريعة الإسلامية', 'دكتور في الشريعة الإسلامية من جامعة الأزهر، متخصص في فقه الأسرة والمعاملات، له أكثر من 15 عاماً في مجال الإفتاء والاستشارات الشرعية')
        RETURNING id INTO dr_ahmed_id;

        -- Create Dr. Fatima Al-Zahra - Islamic Family Counselor
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('dr.fatima@rezgee.com', 'د. فاطمة الزهراء', 'دكتورة في الدراسات الإسلامية', 'دكتورة في الدراسات الإسلامية والأسرة، متخصصة في الإرشاد الأسري الإسلامي، مؤلفة عدة كتب في مجال الأسرة المسلمة')
        RETURNING id INTO dr_fatima_id;

        -- Create Dr. Omar Al-Fiqhi - Marriage Counselor
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('dr.omar@rezgee.com', 'د. عمر الفقهي', 'مستشار زواج إسلامي', 'دكتور في الفقه الإسلامي، مستشار زواج معتمد، له خبرة 20 عاماً في مجال الاستشارات الزوجية والأسرية')
        RETURNING id INTO dr_omar_id;

        -- Create Sheikh Hassan - Islamic Scholar
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('sheikh.hassan@rezgee.com', 'الشيخ حسن المبارك', 'عالم شرعي', 'عالم شرعي متخصص في فقه الأسرة، خريج الجامعة الإسلامية بالمدينة المنورة، إمام وخطيب جامع الهدى')
        RETURNING id INTO sheikh_hassan_id;

        -- Set default author
        sample_user_id := dr_ahmed_id;
    ELSE
        dr_ahmed_id := sample_user_id;
        dr_fatima_id := sample_user_id;
        dr_omar_id := sample_user_id;
        sheikh_hassan_id := sample_user_id;
    END IF;

    -- Insert comprehensive Islamic Guidance Articles
    INSERT INTO articles (title, excerpt, content, author_id, category_id, tags, published_at, read_time, views, likes, comments_count, featured, status) VALUES
    
    -- Article 1: آداب التعارف في الإسلام
    (
        'آداب التعارف في الإسلام: دليل شامل للمقبلين على الزواج',
        'تعرف على الضوابط الشرعية والآداب الإسلامية في التعارف قبل الزواج وكيفية اختيار الشريك المناسب وفقاً لتعاليم الإسلام الحنيف.',
        '<h2>مقدمة</h2>
<p>يعتبر الزواج في الإسلام نصف الدين، وهو سنة من سنن المرسلين، ولذلك فإن التعارف الذي يسبق الزواج له آداب وضوابط شرعية يجب مراعاتها لضمان بناء أسرة مسلمة قوية ومتماسكة.</p>

<h2>الضوابط الشرعية للتعارف</h2>
<p>هناك عدة ضوابط شرعية يجب مراعاتها عند التعارف للزواج:</p>
<ul>
<li><strong>وجود المحرم:</strong> يجب أن يكون التعارف في وجود محرم من أهل المرأة</li>
<li><strong>الهدف الشرعي:</strong> يجب أن يكون الهدف من التعارف هو الزواج وليس مجرد التسلية</li>
<li><strong>الحشمة والوقار:</strong> يجب المحافظة على الحشمة والوقار في التعامل</li>
<li><strong>عدم الخلوة:</strong> تجنب الخلوة بين الرجل والمرأة</li>
</ul>

<h2>معايير اختيار الشريك</h2>
<p>حدد الإسلام معايير واضحة لاختيار شريك الحياة:</p>
<ol>
<li><strong>الدين والخلق:</strong> وهو أهم المعايير كما قال النبي صلى الله عليه وسلم</li>
<li><strong>التوافق الفكري:</strong> أن يكون هناك تفاهم وتوافق في الأفكار والمبادئ</li>
<li><strong>القدرة على تحمل المسؤولية:</strong> خاصة للرجل في النفقة والرعاية</li>
<li><strong>الصحة الجسدية والنفسية:</strong> لضمان حياة زوجية سليمة</li>
</ol>

<h2>خاتمة</h2>
<p>إن التزام الآداب الإسلامية في التعارف يضمن بناء أسرة قوية ومتماسكة، ويحقق البركة في الزواج. نسأل الله أن يوفق جميع الشباب المسلم لإيجاد الشريك المناسب وفقاً لتعاليم الإسلام.</p>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['آداب إسلامية', 'التعارف', 'الزواج', 'الشريعة'],
        NOW() - INTERVAL '1 days',
        8,
        1250,
        89,
        23,
        true,
        'published'
    ),
    
    -- Article 2: الخطبة في الإسلام
    (
        'الخطبة في الإسلام: أحكامها وآدابها وضوابطها الشرعية',
        'دليل شامل حول أحكام الخطبة في الإسلام، من الآداب والضوابط الشرعية إلى الحقوق والواجبات للخاطب والمخطوبة.',
        '<h2>تعريف الخطبة وأهميتها</h2>
<p>الخطبة في الإسلام هي طلب الرجل الزواج من المرأة، وهي مرحلة مهمة تسبق عقد النكاح تهدف إلى التعارف الشرعي بين الطرفين.</p>

<h2>آداب الخطبة</h2>
<ul>
<li><strong>الاستئذان من الولي:</strong> يجب على الخاطب طلب الإذن من ولي المرأة أولاً</li>
<li><strong>النظر الشرعي:</strong> يجوز للخاطب النظر إلى وجه وكفي المخطوبة</li>
<li><strong>عدم الخلوة:</strong> يجب أن يكون اللقاء في وجود محرم</li>
<li><strong>الحديث المناسب:</strong> التحدث في أمور الزواج والحياة المستقبلية</li>
</ul>

<h2>حقوق وواجبات فترة الخطبة</h2>
<p>للخطبة حقوق وواجبات يجب مراعاتها:</p>
<ol>
<li><strong>عدم الخلوة:</strong> لا يجوز الخلوة بين الخاطب والمخطوبة</li>
<li><strong>الهدايا:</strong> يجوز تبادل الهدايا البسيطة</li>
<li><strong>العدل:</strong> عدم خطبة المرأة المخطوبة لآخر</li>
<li><strong>الصدق:</strong> الصدق في إظهار الصفات والأحوال</li>
</ol>

<h2>أحكام فسخ الخطبة</h2>
<p>إذا لم يتم التوافق، يحق لأي من الطرفين فسخ الخطبة، مع مراعاة:</p>
<ul>
<li>إرجاع الهدايا إذا كانت موجودة</li>
<li>التعامل بأدب واحترام</li>
<li>عدم إفشاء الأسرار</li>
</ul>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['الخطبة', 'أحكام شرعية', 'آداب إسلامية', 'النكاح'],
        NOW() - INTERVAL '3 days',
        7,
        890,
        67,
        15,
        true,
        'published'
    ),
    
    -- Article 3: اختيار الشريك في الإسلام
    (
        'معايير اختيار شريك الحياة في الإسلام: الدين والخلق أولاً',
        'تعرف على المعايير الشرعية لاختيار شريك الحياة كما وردت في القرآن والسنة، وكيفية الموازنة بين الدين والصفات الأخرى.',
        '<h2>أهمية حسن الاختيار</h2>
<p>اختيار شريك الحياة من أهم القرارات في حياة المسلم، وقد وضع الإسلام معايير واضحة لهذا الاختيار لضمان نجاح الحياة الزوجية.</p>

<h2>المعايير الشرعية للاختيار</h2>
<p>قال النبي صلى الله عليه وسلم: "تُنكح المرأة لأربع: لمالها ولحسبها ولجمالها ولدينها، فاظفر بذات الدين تربت يداك"</p>

<h3>1. الدين والتقوى</h3>
<ul>
<li>الالتزام بأركان الإسلام</li>
<li>حسن الخلق والسلوك</li>
<li>الصدق والأمانة</li>
<li>البعد عن المعاصي</li>
</ul>

<h3>2. الكفاءة</h3>
<ul>
<li>التوافق في المستوى التعليمي</li>
<li>التقارب في العمر</li>
<li>التوافق الاجتماعي</li>
<li>القدرة على تحمل المسؤولية</li>
</ul>

<h3>3. الصفات الشخصية</h3>
<ul>
<li>حسن المعاشرة</li>
<li>الصبر والحلم</li>
<li>الكرم والجود</li>
<li>الحكمة في التعامل</li>
</ul>

<h2>نصائح للاختيار الصحيح</h2>
<ol>
<li><strong>الاستخارة:</strong> الدعاء وطلب التوفيق من الله</li>
<li><strong>الاستشارة:</strong> أخذ رأي الأهل والأصدقاء الثقات</li>
<li><strong>التأني:</strong> عدم التسرع في اتخاذ القرار</li>
<li><strong>التحقق:</strong> التأكد من صحة المعلومات</li>
</ol>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['اختيار الشريك', 'معايير شرعية', 'الدين والخلق', 'الكفاءة'],
        NOW() - INTERVAL '5 days',
        9,
        1120,
        78,
        19,
        false,
        'published'
    ),
    
    -- Article 4: الاستخارة في الزواج
    (
        'صلاة الاستخارة في الزواج: كيفيتها وآدابها وعلامات الإجابة',
        'دليل شامل حول صلاة الاستخارة في أمور الزواج، من كيفية أدائها إلى فهم علامات الإجابة والتوكل على الله.',
        '<h2>أهمية الاستخارة في الزواج</h2>
<p>الاستخارة سنة مؤكدة في جميع أمور الحياة، وهي أولى في أمر الزواج لأنه قرار مصيري يؤثر على مستقبل الإنسان.</p>

<h2>كيفية صلاة الاستخارة</h2>
<p>تؤدى صلاة الاستخارة كما علمنا النبي صلى الله عليه وسلم:</p>
<ol>
<li><strong>الوضوء:</strong> التطهر والوضوء</li>
<li><strong>الصلاة:</strong> ركعتان من غير الفريضة</li>
<li><strong>الدعاء:</strong> دعاء الاستخارة المأثور</li>
<li><strong>التوكل:</strong> التوكل على الله وانتظار النتيجة</li>
</ol>

<h2>دعاء الاستخارة</h2>
<p>"اللهم إني أستخيرك بعلمك، وأستقدرك بقدرتك، وأسألك من فضلك العظيم، فإنك تقدر ولا أقدر، وتعلم ولا أعلم، وأنت علام الغيوب..."</p>

<h2>آداب الاستخارة</h2>
<ul>
<li><strong>الطهارة:</strong> أن يكون على وضوء</li>
<li><strong>القبلة:</strong> استقبال القبلة</li>
<li><strong>الخشوع:</strong> حضور القلب والخشوع</li>
<li><strong>اليقين:</strong> اليقين في إجابة الله</li>
</ul>

<h2>علامات إجابة الاستخارة</h2>
<p>ليس للاستخارة علامات محددة، ولكن المؤمن يشعر بـ:</p>
<ul>
<li>انشراح الصدر للأمر</li>
<li>تيسير الأسباب</li>
<li>زوال العوائق</li>
<li>الراحة النفسية</li>
</ul>

<h2>أخطاء شائعة في الاستخارة</h2>
<ul>
<li>انتظار الرؤى والأحلام</li>
<li>تكرار الاستخارة بلا داع</li>
<li>عدم الأخذ بالأسباب</li>
<li>التردد بعد الاستخارة</li>
</ul>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['الاستخارة', 'صلاة', 'دعاء', 'التوكل على الله'],
        NOW() - INTERVAL '7 days',
        6,
        750,
        55,
        12,
        false,
        'published'
    ),
    
    -- Article 5: الولاية في النكاح
    (
        'الولاية في النكاح: أحكامها وحكمتها في الشريعة الإسلامية',
        'فهم أحكام الولاية في النكاح وحكمتها الشرعية، ودور الولي في حماية مصالح المرأة وضمان حقوقها.',
        '<h2>تعريف الولاية في النكاح</h2>
<p>الولاية في النكاح هي سلطة شرعية يملكها الولي على المرأة في أمر زواجها، وهي من الأحكام المهمة في الفقه الإسلامي.</p>

<h2>أدلة وجوب الولاية</h2>
<p>استدل العلماء على وجوب الولاية بأدلة من القرآن والسنة:</p>
<ul>
<li>قوله تعالى: "فلا تعضلوهن أن ينكحن أزواجهن"</li>
<li>قول النبي صلى الله عليه وسلم: "لا نكاح إلا بولي"</li>
<li>قوله: "أيما امرأة نكحت بغير إذن وليها فنكاحها باطل"</li>
</ul>

<h2>ترتيب الأولياء</h2>
<p>رتب الفقهاء الأولياء حسب القرب من المرأة:</p>
<ol>
<li><strong>الأب</strong></li>
<li><strong>الجد من جهة الأب</strong></li>
<li><strong>الابن</strong></li>
<li><strong>ابن الابن</strong></li>
<li><strong>الأخ الشقيق</strong></li>
<li><strong>الأخ لأب</strong></li>
<li><strong>ابن الأخ الشقيق</strong></li>
<li><strong>العم الشقيق</strong></li>
<li><strong>الحاكم أو نائبه</strong></li>
</ol>

<h2>حقوق الولي وواجباته</h2>
<h3>الحقوق:</h3>
<ul>
<li>الموافقة على الزواج أو رفضه</li>
<li>اختيار الزوج المناسب</li>
<li>التفاوض في المهر</li>
<li>حضور عقد النكاح</li>
</ul>

<h3>الواجبات:</h3>
<ul>
<li>مراعاة مصلحة المرأة</li>
<li>عدم منعها من الزواج بلا مبرر</li>
<li>اختيار الكفء لها</li>
<li>العدل بين البنات</li>
</ul>

<h2>العضل وأحكامه</h2>
<p>العضل هو منع الولي المرأة من الزواج بلا مبرر شرعي، وهو محرم شرعاً. في هذه الحالة تنتقل الولاية للولي الذي يليه.</p>

<h2>الحكمة من الولاية</h2>
<ul>
<li>حماية المرأة من الاستغلال</li>
<li>ضمان اختيار الزوج المناسب</li>
<li>تقوية الروابط الأسرية</li>
<li>منع الزواج العشوائي</li>
</ul>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['الولاية', 'النكاح', 'أحكام شرعية', 'حقوق المرأة'],
        NOW() - INTERVAL '9 days',
        8,
        680,
        42,
        8,
        false,
        'published'
    ),

    -- Article 6: المهر في الإسلام
    (
        'المهر في الإسلام: أحكامه وحكمته ومقداره الشرعي',
        'دليل شامل حول أحكام المهر في الإسلام، من تعريفه وحكمته إلى مقداره وطرق تحديده وفقاً للشريعة الإسلامية.',
        '<h2>تعريف المهر وأهميته</h2>
<p>المهر هو المال الذي يدفعه الزوج للزوجة بسبب عقد النكاح، وهو حق خالص للمرأة كرمها الله به وأوجبه لها.</p>

<h2>أدلة وجوب المهر</h2>
<p>ثبت وجوب المهر بالقرآن والسنة والإجماع:</p>
<ul>
<li>قوله تعالى: "وآتوا النساء صدقاتهن نحلة"</li>
<li>قوله تعالى: "فما استمتعتم به منهن فآتوهن أجورهن فريضة"</li>
<li>إجماع العلماء على وجوبه</li>
</ul>

<h2>حكمة تشريع المهر</h2>
<ul>
<li><strong>إكرام المرأة:</strong> إظهار قدرها ومكانتها</li>
<li><strong>الجدية في الزواج:</strong> إثبات جدية الرجل في الزواج</li>
<li><strong>الأمان المالي:</strong> توفير أمان مالي للمرأة</li>
<li><strong>تقوية الرابطة:</strong> تقوية الرابطة بين الزوجين</li>
</ul>

<h2>مقدار المهر</h2>
<p>لم يحدد الشرع مقداراً معيناً للمهر، ولكن وضع ضوابط:</p>
<ul>
<li><strong>الحد الأدنى:</strong> ربع دينار ذهبي (حوالي 1.06 جرام ذهب)</li>
<li><strong>الحد الأعلى:</strong> لا حد أعلى محدد</li>
<li><strong>الاعتدال:</strong> يستحب الاعتدال وعدم المغالاة</li>
<li><strong>القدرة:</strong> مراعاة قدرة الزوج المالية</li>
</ul>

<h2>أنواع المهر</h2>
<h3>1. المهر المسمى:</h3>
<p>ما اتفق عليه الطرفان وسمي في العقد</p>

<h3>2. مهر المثل:</h3>
<p>مهر مثيلاتها من النساء في حالة عدم التسمية</p>

<h2>أحكام تعجيل المهر وتأجيله</h2>
<ul>
<li><strong>المعجل:</strong> ما يدفع عند العقد أو قبل الدخول</li>
<li><strong>المؤجل:</strong> ما يؤجل إلى وقت معين أو عند الطلاق</li>
<li><strong>الجواز:</strong> يجوز تعجيل كل المهر أو تأجيله أو تقسيمه</li>
</ul>

<h2>نصائح في تحديد المهر</h2>
<ol>
<li><strong>الاعتدال:</strong> عدم المغالاة في المهر</li>
<li><strong>القدرة:</strong> مراعاة الظروف المالية</li>
<li><strong>العرف:</strong> مراعاة عرف المجتمع</li>
<li><strong>الرضا:</strong> رضا الطرفين بالمقدار</li>
</ol>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['المهر', 'الصداق', 'أحكام النكاح', 'حقوق المرأة'],
        NOW() - INTERVAL '11 days',
        7,
        920,
        63,
        14,
        false,
        'published'
    ),

    -- Article 7: الشهود في النكاح
    (
        'الشهود في النكاح: أهميتهم وشروطهم في الشريعة الإسلامية',
        'تعرف على أحكام الشهود في عقد النكاح، من شروطهم وعددهم إلى الحكمة من وجودهم في العقد الشرعي.',
        '<h2>أهمية الشهود في النكاح</h2>
<p>الشهود في النكاح من الأركان المهمة التي تضفي على العقد الشرعية والعلانية، وتحفظ حقوق الطرفين.</p>

<h2>أدلة وجوب الشهود</h2>
<ul>
<li>قول النبي صلى الله عليه وسلم: "لا نكاح إلا بولي وشاهدي عدل"</li>
<li>قوله: "أعلنوا النكاح"</li>
<li>إجماع جمهور العلماء على وجوبهم</li>
</ul>

<h2>شروط الشهود</h2>
<p>يشترط في شهود النكاح:</p>
<ul>
<li><strong>العدد:</strong> شاهدان على الأقل</li>
<li><strong>العدالة:</strong> أن يكونا عدلين</li>
<li><strong>البلوغ:</strong> أن يكونا بالغين</li>
<li><strong>العقل:</strong> أن يكونا عاقلين</li>
<li><strong>الإسلام:</strong> أن يكونا مسلمين</li>
<li><strong>الذكورة:</strong> عند جمهور العلماء</li>
</ul>

<h2>الحكمة من الشهود</h2>
<ul>
<li><strong>الإعلان:</strong> إعلان النكاح وإشهاره</li>
<li><strong>حفظ الحقوق:</strong> حفظ حقوق الزوجين</li>
<li><strong>منع الإنكار:</strong> منع إنكار العقد لاحقاً</li>
<li><strong>التوثيق:</strong> توثيق العقد شرعياً</li>
</ul>

<h2>واجبات الشهود</h2>
<ol>
<li><strong>الحضور:</strong> حضور مجلس العقد</li>
<li><strong>الاستماع:</strong> سماع الإيجاب والقبول</li>
<li><strong>الفهم:</strong> فهم مضمون العقد</li>
<li><strong>الشهادة:</strong> الشهادة عند الحاجة</li>
</ol>

<h2>أحكام متعلقة بالشهود</h2>
<ul>
<li><strong>عدم الإكراه:</strong> يجب أن تكون الشهادة طوعية</li>
<li><strong>عدم المصلحة:</strong> عدم وجود مصلحة شخصية</li>
<li><strong>الأهلية:</strong> أهلية الشهود للشهادة</li>
<li><strong>الحضور الفعلي:</strong> الحضور الفعلي لمجلس العقد</li>
</ul>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['الشهود', 'النكاح', 'أركان الزواج', 'العدالة'],
        NOW() - INTERVAL '13 days',
        6,
        540,
        38,
        7,
        false,
        'published'
    ),

    -- Article 8: العدة وأحكامها
    (
        'العدة في الإسلام: أنواعها وأحكامها وحكمتها الشرعية',
        'دليل شامل حول أحكام العدة في الإسلام، من أنواعها المختلفة إلى الحكمة من تشريعها وما يجب على المعتدة.',
        '<h2>تعريف العدة</h2>
<p>العدة هي المدة التي تنتظرها المرأة بعد انتهاء الزواج بطلاق أو وفاة أو فسخ، وهي من الأحكام المهمة في الفقه الإسلامي.</p>

<h2>أنواع العدة</h2>
<h3>1. عدة الطلاق:</h3>
<ul>
<li><strong>ذات الحيض:</strong> ثلاث حيضات</li>
<li><strong>الآيسة:</strong> ثلاثة أشهر</li>
<li><strong>الحامل:</strong> حتى وضع الحمل</li>
</ul>

<h3>2. عدة الوفاة:</h3>
<ul>
<li><strong>غير الحامل:</strong> أربعة أشهر وعشرة أيام</li>
<li><strong>الحامل:</strong> حتى وضع الحمل</li>
</ul>

<h2>الحكمة من العدة</h2>
<ul>
<li><strong>براءة الرحم:</strong> التأكد من عدم وجود حمل</li>
<li><strong>فرصة للمراجعة:</strong> إتاحة فرصة للمراجعة في الطلاق الرجعي</li>
<li><strong>تعظيم النكاح:</strong> إظهار عظمة عقد النكاح</li>
<li><strong>الحداد:</strong> إظهار الحزن على الزوج المتوفى</li>
</ul>

<h2>أحكام العدة</h2>
<h3>ما يجب على المعتدة:</h3>
<ul>
<li><strong>البقاء في البيت:</strong> عدم الخروج إلا لحاجة</li>
<li><strong>عدم التزين:</strong> تجنب الزينة والطيب</li>
<li><strong>عدم الخطبة:</strong> عدم قبول الخطبة صراحة</li>
<li><strong>الإحداد:</strong> في عدة الوفاة</li>
</ul>

<h3>ما يجوز للمعتدة:</h3>
<ul>
<li>الخروج للحاجة الضرورية</li>
<li>العمل إذا كانت تعمل</li>
<li>التحدث مع الأقارب</li>
<li>العلاج والطبابة</li>
</ul>

<h2>النفقة في العدة</h2>
<ul>
<li><strong>المطلقة الرجعية:</strong> لها النفقة والسكنى</li>
<li><strong>المطلقة البائن:</strong> لها السكنى فقط</li>
<li><strong>الحامل:</strong> لها النفقة حتى تضع</li>
<li><strong>المتوفى عنها:</strong> لا نفقة لها من التركة</li>
</ul>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['العدة', 'أحكام الطلاق', 'الوفاة', 'فقه المرأة'],
        NOW() - INTERVAL '15 days',
        8,
        670,
        45,
        9,
        false,
        'published'
    );

END $$;
