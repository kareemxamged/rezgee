-- Insert sample articles (assuming we have users and categories)

-- First, let's get the category IDs
DO $$
DECLARE
    islamic_guidance_id UUID;
    marriage_tips_id UUID;
    family_guidance_id UUID;
    digital_safety_id UUID;
    sample_user_id UUID;
BEGIN
    -- Get category IDs
    SELECT id INTO islamic_guidance_id FROM article_categories WHERE name = 'الإرشاد الإسلامي';
    SELECT id INTO marriage_tips_id FROM article_categories WHERE name = 'نصائح الزواج';
    SELECT id INTO family_guidance_id FROM article_categories WHERE name = 'التوجيه الأسري';
    SELECT id INTO digital_safety_id FROM article_categories WHERE name = 'الأمان الرقمي';
    
    -- Get a sample user ID (or create one if needed)
    SELECT id INTO sample_user_id FROM users LIMIT 1;
    
    -- If no user exists, create a sample author
    IF sample_user_id IS NULL THEN
        INSERT INTO users (email, full_name, title, bio) VALUES
        ('author@rezge.com', 'د. أحمد الشريف', 'دكتور في الشريعة الإسلامية', 'دكتور في الشريعة الإسلامية من جامعة الأزهر، متخصص في فقه الأسرة والمعاملات')
        RETURNING id INTO sample_user_id;
    END IF;
    
    -- Insert sample articles
    INSERT INTO articles (
        title, 
        excerpt, 
        content, 
        author_id, 
        category_id, 
        tags, 
        published_at, 
        read_time, 
        views, 
        likes, 
        comments_count, 
        featured, 
        status
    ) VALUES
    (
        'آداب التعارف في الإسلام: دليل شامل للمقبلين على الزواج',
        'تعرف على الضوابط الشرعية والآداب الإسلامية في التعارف قبل الزواج وكيفية اختيار الشريك المناسب وفقاً لتعاليم الإسلام الحنيف.',
        '<h2>مقدمة</h2>
<p>يعتبر الزواج في الإسلام نصف الدين، وهو سنة من سنن المرسلين، ولذلك فإن التعارف الذي يسبق الزواج له آداب وضوابط شرعية يجب مراعاتها لضمان بناء أسرة مسلمة قوية ومتماسكة.</p>

<h2>الضوابط الشرعية للتعارف</h2>
<p>هناك عدة ضوابط شرعية يجب مراعاتها عند التعارف للزواج:</p>
<ul>
<li><strong>وجود المحرم:</strong> يجب أن يكون التعارف في وجود محرم من أهل المرأة</li>
<li><strong>الهدف الشرعي:</strong> يجب أن يكون الهدف من التعارف هو الزواج وليس مجرد التسلية</li>
<li><strong>الحشمة والوقار:</strong> يجب المحافظة على الحشمة والوقار في التعامل</li>
<li><strong>عدم الخلوة:</strong> تجنب الخلوة بين الرجل والمرأة</li>
</ul>

<h2>معايير اختيار الشريك</h2>
<p>حدد الإسلام معايير واضحة لاختيار شريك الحياة:</p>
<ol>
<li><strong>الدين والخلق:</strong> وهو أهم المعايير كما قال النبي صلى الله عليه وسلم</li>
<li><strong>التوافق الفكري:</strong> أن يكون هناك تفاهم وتوافق في الأفكار والمبادئ</li>
<li><strong>القدرة على تحمل المسؤولية:</strong> خاصة للرجل في النفقة والرعاية</li>
<li><strong>الصحة الجسدية والنفسية:</strong> لضمان حياة زوجية سليمة</li>
</ol>

<h2>دور الأهل في التعارف</h2>
<p>للأهل دور مهم في عملية التعارف والزواج، حيث يقومون بـ:</p>
<ul>
<li>التوجيه والنصح</li>
<li>البحث عن الشريك المناسب</li>
<li>الاستخارة والدعاء</li>
<li>المتابعة والإشراف على عملية التعارف</li>
</ul>

<h2>خاتمة</h2>
<p>إن التزام الآداب الإسلامية في التعارف يضمن بناء أسرة قوية ومتماسكة، ويحقق البركة في الزواج. نسأل الله أن يوفق جميع الشباب المسلم لإيجاد الشريك المناسب وفقاً لتعاليم الإسلام.</p>',
        sample_user_id,
        islamic_guidance_id,
        ARRAY['آداب إسلامية', 'التعارف', 'الزواج', 'الشريعة'],
        NOW() - INTERVAL '5 days',
        8,
        1250,
        89,
        23,
        true,
        'published'
    ),
    (
        'دور الأهل في اختيار شريك الحياة: التوازن بين الرأي والاختيار',
        'كيف يمكن للأهل المساعدة في عملية اختيار شريك الحياة مع احترام رغبة الأبناء وتوجيههم نحو الخيار الأفضل بحكمة ومحبة.',
        '<h2>أهمية دور الأهل</h2>
<p>يلعب الأهل دوراً محورياً في عملية اختيار شريك الحياة، فهم يمتلكون الخبرة والحكمة التي تساعد الأبناء في اتخاذ القرار الصحيح.</p>

<h2>التوازن المطلوب</h2>
<p>يجب على الأهل إيجاد التوازن بين:</p>
<ul>
<li>احترام رغبة الأبناء واختيارهم</li>
<li>تقديم النصح والتوجيه</li>
<li>مشاركة الخبرة والحكمة</li>
<li>الدعاء والاستخارة</li>
</ul>

<h2>كيفية المساعدة</h2>
<p>يمكن للأهل المساعدة من خلال:</p>
<ol>
<li>البحث عن الشريك المناسب</li>
<li>التحقق من الخلفية والسمعة</li>
<li>ترتيب اللقاءات الشرعية</li>
<li>تقديم المشورة والنصح</li>
</ol>',
        sample_user_id,
        family_guidance_id,
        ARRAY['الأهل', 'الاختيار', 'التوجيه', 'الأسرة'],
        NOW() - INTERVAL '10 days',
        6,
        980,
        67,
        18,
        true,
        'published'
    ),
    (
        'الأمان الرقمي في مواقع الزواج: كيف تحمي نفسك من المحتالين',
        'نصائح مهمة للحفاظ على أمانك وخصوصيتك عند استخدام مواقع الزواج الإلكترونية وتجنب عمليات الاحتيال والمخاطر الرقمية.',
        '<h2>المخاطر الرقمية</h2>
<p>مع انتشار مواقع الزواج الإلكترونية، ظهرت مخاطر جديدة يجب الحذر منها:</p>
<ul>
<li>الهويات المزيفة</li>
<li>عمليات الاحتيال المالي</li>
<li>سرقة المعلومات الشخصية</li>
<li>التلاعب العاطفي</li>
</ul>

<h2>نصائح الأمان</h2>
<p>للحماية من هذه المخاطر، اتبع هذه النصائح:</p>
<ol>
<li>تحقق من هوية الشخص</li>
<li>لا تشارك معلومات مالية</li>
<li>استخدم المواقع الموثوقة فقط</li>
<li>احذر من الطلبات المشبوهة</li>
</ol>

<h2>علامات التحذير</h2>
<p>انتبه لهذه العلامات:</p>
<ul>
<li>طلب المال أو المساعدة المالية</li>
<li>رفض اللقاء أو المكالمات الصوتية</li>
<li>قصص غير منطقية أو متناقضة</li>
<li>الإلحاح المفرط</li>
</ul>',
        sample_user_id,
        digital_safety_id,
        ARRAY['الأمان', 'الحماية', 'المحتالين', 'الخصوصية'],
        NOW() - INTERVAL '15 days',
        10,
        1450,
        102,
        31,
        false,
        'published'
    ),
    (
        'أسرار الحياة الزوجية السعيدة: نصائح من خبراء العلاقات',
        'اكتشف الأسرار التي تجعل الحياة الزوجية سعيدة ومستقرة من خلال نصائح عملية مجربة من خبراء العلاقات الأسرية.',
        '<h2>أساسيات الحياة الزوجية السعيدة</h2>
<p>الحياة الزوجية السعيدة لا تحدث بالصدفة، بل تحتاج إلى جهد مشترك وفهم متبادل بين الزوجين.</p>

<h2>التواصل الفعال</h2>
<p>التواصل هو أساس العلاقة الناجحة:</p>
<ul>
<li>الاستماع الجيد للشريك</li>
<li>التعبير عن المشاعر بوضوح</li>
<li>تجنب الانتقاد المدمر</li>
<li>حل المشاكل بالحوار</li>
</ul>

<h2>الاحترام المتبادل</h2>
<p>يجب أن يسود الاحترام في جميع جوانب العلاقة:</p>
<ol>
<li>احترام الآراء المختلفة</li>
<li>تقدير جهود الشريك</li>
<li>عدم التقليل من شأن الآخر</li>
<li>الاعتذار عند الخطأ</li>
</ol>',
        sample_user_id,
        marriage_tips_id,
        ARRAY['الحياة الزوجية', 'السعادة', 'التواصل', 'الاحترام'],
        NOW() - INTERVAL '20 days',
        7,
        850,
        45,
        12,
        false,
        'published'
    );
    
    -- Update category counts
    UPDATE article_categories SET article_count = (
        SELECT COUNT(*) FROM articles WHERE category_id = article_categories.id AND status = 'published'
    );
    
END $$;
